function onYouTubePlayerAPIReady(){mejs.YouTubeApi.iFrameReady()}function onYouTubePlayerReady(e){mejs.YouTubeApi.flashReady(e)}function init(){urlVars=getUrlVars(),window.isFullscreen=!1,"true"===urlVars.fullscreen&&($("html").addClass("fullscreen"),window.isFullscreen=!0,$("#fullscreenButton").show(),document.onkeydown=function(e){e=e||window.event,27==e.keyCode&&window.opener.closePopup()}),"exterior"!=urlVars.type&&"interior"!=urlVars.type&&(urlVars.type="exterior"),$("body").addClass(urlVars.type),disableTouchScroll(),initFullscreenButton(),initHotspotsToggleButton(),initOptions()}function initHotspotsToggleButton(){$("#toggleHotspotsButton").fastClick(function(){console.log("toggleHotspotsButton clicked!"),knowledgeLibrary&&knowledgeLibrary.closeCurrentSlide()||($(this).toggleClass("hotspotsHidden"),$("#hotspots").toggle(),$("#lineCanvas").toggle(),$(".hotspot").toggle(),$(this).hasClass("hotspotsHidden")?$("#toggleHotspotsButtonDescription").text($.FMGetText(["container","toggleHotspotsButtonDescriptionShow"])):$("#toggleHotspotsButtonDescription").text($.FMGetText(["container","toggleHotspotsButtonDescriptionHide"])),$("#flash")[0]&&$("#flash")[0].toggleHotspots())})}function enableTouchScroll(){document.ontouchmove=null}function disableTouchScroll(){document.ontouchmove=function(e){e.preventDefault()}}function loadComplete(){hideLoader(),showButtons()}function showButtons(){$("#fullscreenButton").show(),$("#toggleHotspotsButton").show()}function hideLoader(){$("#preloader").remove()}function updateLoader(e){console.log("Updating loader: "+e),$("#preloaderLabel").text(e)}function initFullscreenButton(){$("#fullscreenButton").fastClick(function(){if(window.opener)window.opener.closePopup();else{var e="resizable=yes,scrollbars=no,status=no,left=0,top=0,location=no";e+=",width="+screen.availWidth+",height="+screen.availHeight,popup=window.open("?type="+urlVars.type+"&fullscreen=true"+"&truckType="+options.truckType+"&language="+options.language,"Fullscreen",e)}})}function closePopup(){popup&&(popup.close(),popup=null)}function enterFullscreen(){$("html").addClass("fullscreen"),$("#exteriorWalkaround").remove(),new ExteriorWalkaroundFullscreen(options,"tractor",knowledgeLibrary)}function leaveFullscreen(){$("html").removeClass("fullscreen"),$("#exteriorWalkaround").remove(),new ExteriorWalkaround(options,"tractor",knowledgeLibrary)}function initOptions(){console.log("initOptions()"),$.getJSON("config.json",function(e){console.log("config.json loaded!"),options=e,"preferFlash"in urlVars&&(console.log("Override preferFlash variable in config.json with url variable "+("true"===urlVars.preferFlash)+"."),options.preferFlash="true"===urlVars.preferFlash),"truckType"in urlVars&&(console.log("Overriding truckType in config.json with "+urlVars.truckType+"."),options.truckType=urlVars.truckType),"language"in urlVars&&(options.language=urlVars.language),loadLanguageSpecificCSS(),$.FMInitLanguage({automaticLoad:!1,callback:languageLoaded,language:options.language,languagePath:options.paths.languagePath,projectPrefix:options.projectPrefix})})}function languageLoaded(){console.log("Languages loaded."),$.FMInitSlides({callback:slidesLoaded,language:options.language,languagePath:options.paths.languagePath,projectPrefix:options.projectPrefix})}function slidesLoaded(){console.log("Slides loaded"),initComplete()}function loadLanguageSpecificCSS(){var e=options.paths.languagePath+options.language+"/"+options.projectPrefix+"_"+options.language+"_styles.css";document.createStyleSheet?document.createStyleSheet(e):$("head").append($('<link rel="stylesheet" href="'+e+'">'))}function initComplete(){console.log("initComplete()"),initInterfaceTexts(),options.isRhd=-1!=options.rhd.indexOf(options.language)?!0:!1,knowledgeLibrary=new KnowledgeLibrary(options),"exterior"==urlVars.type?initExterior():initInterior(),urlVars.slide&&knowledgeLibrary.showSlide(unescape(urlVars.slide))}function initInterfaceTexts(){console.log("initInterfaceTexts()"),"true"===urlVars.fullscreen?$("#fullscreenButtonDescription").text($.FMGetText(["container","exitFullscreenButtonDescription"])):$("#fullscreenButtonDescription").text($.FMGetText(["container","fullscreenButtonDescription"])),$("#toggleHotspotsButtonDescription").text($.FMGetText(["container","toggleHotspotsButtonDescriptionHide"])),$("#fullscreenText p").text($.FMGetText(["container","fullscreenText"])),$(".chromeframe p").text($.FMGetText(["container","outdatedBrowser"]))}function initExterior(){options.preferFlash?initFlashExterior(function(e){e.success?console.log("Flash initialization okay!"):initHtmlExterior()}):Modernizr.canvas&&Modernizr.csstransforms?initHtmlExterior():initFlashExterior()}function initInterior(){options.preferFlash?initFlashInterior(function(e){e.success?console.log("Flash initialization okay!"):($("body").removeClass("flash"),initHtmlInterior())}):Modernizr.csstransforms3d&&"Firefox"!=BrowserDetect.browser?initHtmlInterior():initFlashInterior()}function initHtmlExterior(){"true"===urlVars.fullscreen?(console.log("Fullscreen! Yeah!"),new ExteriorWalkaroundFullscreen(options,knowledgeLibrary)):new ExteriorWalkaround(options,knowledgeLibrary)}function initHtmlInterior(){Modernizr.csstransforms3d?new InteriorPanorama(options,knowledgeLibrary):alert("You cannot use the html interior. PLease install Flash.")}function initFlashExterior(e){console.log("initFlashExterior()");var t=$("<div id='exteriorWalkaround'><div id='no_flash'></div></div>");$("#main").append(t),$("body").addClass("flash");var i=758,n=487;"true"!=urlVars.fullscreen?(i=758,n=487):"tractor"==options.truckType?(i=862,n=765):"rigid"==options.truckType&&(i=1800,n=765);var o=10,a=0,s=0,r="",l=options.language,u=o+"."+a+"."+s,d={};d.URLPath=r,d.languageCode=l,d.truckType=options.truckType,d.interfaceType="true"===urlVars.fullscreen?"fullscreen":"iframe",d.scormVersion="1.2",d.location="",d.scene_location="";var c={};c.play="true",c.loop="true",c.menu="true",c.quality="high",c.scale="showall",c.wmode="transparent",c.devicefont="false",c.allowfullscreen="true",c.allowscriptaccess="always";var p={};p.id="flash",p.name="flash",p.align="left",swfobject.embedSWF("truck_exterior.swf","no_flash","100%",n,u,!1,d,c,p,e)}function initFlashInterior(e){console.log("initFlashInterior()"),$("html").addClass("flash");var t=$("<div id='no_flash'></div>");$("#main").append(t);var i=758,n=487;if("true"===urlVars.fullscreen){var o=screen.availWidth,a=screen.availHeight;document.body&&document.body.offsetWidth&&(o=document.body.offsetWidth,a=document.body.offsetHeight),"CSS1Compat"==document.compatMode&&document.documentElement&&document.documentElement.offsetWidth&&(o=document.documentElement.offsetWidth,a=document.documentElement.offsetHeight),window.innerWidth&&window.innerHeight&&(o=window.innerWidth,a=window.innerHeight),i=o,n=a}var s=10,r=0,l=0,u="",d=options.language,c=s+"."+r+"."+l,p={};p.URLPath=u,p.languageCode=d,p.scormVersion="1.2",p.location="",p.scene_location="";var h={};h.play="true",h.loop="true",h.menu="true",h.quality="high",h.scale="showall",h.wmode="transparent",h.devicefont="false",h.allowfullscreen="true",h.allowscriptaccess="always";var m={};m.id="flash",m.name="flash",m.align="left",swfobject.embedSWF("truck_interior.swf","no_flash","100%",n,c,!1,p,h,m,e)}function showSlide(e){knowledgeLibrary.showSlide(e)}function getUrlVars(){for(var e,t=[],i=window.location.href.slice(window.location.href.indexOf("?")+1).split("&"),n=0;i.length>n;n++)e=i[n].split("="),t.push(e[0]),t[e[0]]=e[1];return t}function getWindowProperties(){var e=630,t=460;return document.body&&document.body.offsetWidth&&(e=document.body.offsetWidth,t=document.body.offsetHeight),"CSS1Compat"==document.compatMode&&document.documentElement&&document.documentElement.offsetWidth&&(e=document.documentElement.offsetWidth,t=document.documentElement.offsetHeight),window.innerWidth&&window.innerHeight&&(e=window.innerWidth,t=window.innerHeight),{width:e,height:t}}eval(function(e,t,i,n,o,a){if(o=function(e){return(t>e?"":o(parseInt(e/t)))+((e%=t)>35?String.fromCharCode(e+29):e.toString(36))},!"".replace(/^/,String)){for(;i--;)a[o(i)]=n[i]||o(i);n=[function(e){return a[e]}],o=function(){return"\\w+"},i=1}for(;i--;)n[i]&&(e=e.replace(RegExp("\\b"+o(i)+"\\b","g"),n[i]));return e}("9 17={3i:'0.1.3',16:1e-6};l v(){}v.23={e:l(i){8(i<1||i>7.4.q)?w:7.4[i-1]},2R:l(){8 7.4.q},1u:l(){8 F.1x(7.2u(7))},24:l(a){9 n=7.4.q;9 V=a.4||a;o(n!=V.q){8 1L}J{o(F.13(7.4[n-1]-V[n-1])>17.16){8 1L}}H(--n);8 2x},1q:l(){8 v.u(7.4)},1b:l(a){9 b=[];7.28(l(x,i){b.19(a(x,i))});8 v.u(b)},28:l(a){9 n=7.4.q,k=n,i;J{i=k-n;a(7.4[i],i+1)}H(--n)},2q:l(){9 r=7.1u();o(r===0){8 7.1q()}8 7.1b(l(x){8 x/r})},1C:l(a){9 V=a.4||a;9 n=7.4.q,k=n,i;o(n!=V.q){8 w}9 b=0,1D=0,1F=0;7.28(l(x,i){b+=x*V[i-1];1D+=x*x;1F+=V[i-1]*V[i-1]});1D=F.1x(1D);1F=F.1x(1F);o(1D*1F===0){8 w}9 c=b/(1D*1F);o(c<-1){c=-1}o(c>1){c=1}8 F.37(c)},1m:l(a){9 b=7.1C(a);8(b===w)?w:(b<=17.16)},34:l(a){9 b=7.1C(a);8(b===w)?w:(F.13(b-F.1A)<=17.16)},2k:l(a){9 b=7.2u(a);8(b===w)?w:(F.13(b)<=17.16)},2j:l(a){9 V=a.4||a;o(7.4.q!=V.q){8 w}8 7.1b(l(x,i){8 x+V[i-1]})},2C:l(a){9 V=a.4||a;o(7.4.q!=V.q){8 w}8 7.1b(l(x,i){8 x-V[i-1]})},22:l(k){8 7.1b(l(x){8 x*k})},x:l(k){8 7.22(k)},2u:l(a){9 V=a.4||a;9 i,2g=0,n=7.4.q;o(n!=V.q){8 w}J{2g+=7.4[n-1]*V[n-1]}H(--n);8 2g},2f:l(a){9 B=a.4||a;o(7.4.q!=3||B.q!=3){8 w}9 A=7.4;8 v.u([(A[1]*B[2])-(A[2]*B[1]),(A[2]*B[0])-(A[0]*B[2]),(A[0]*B[1])-(A[1]*B[0])])},2A:l(){9 m=0,n=7.4.q,k=n,i;J{i=k-n;o(F.13(7.4[i])>F.13(m)){m=7.4[i]}}H(--n);8 m},2Z:l(x){9 a=w,n=7.4.q,k=n,i;J{i=k-n;o(a===w&&7.4[i]==x){a=i+1}}H(--n);8 a},3g:l(){8 S.2X(7.4)},2d:l(){8 7.1b(l(x){8 F.2d(x)})},2V:l(x){8 7.1b(l(y){8(F.13(y-x)<=17.16)?x:y})},1o:l(a){o(a.K){8 a.1o(7)}9 V=a.4||a;o(V.q!=7.4.q){8 w}9 b=0,2b;7.28(l(x,i){2b=x-V[i-1];b+=2b*2b});8 F.1x(b)},3a:l(a){8 a.1h(7)},2T:l(a){8 a.1h(7)},1V:l(t,a){9 V,R,x,y,z;2S(7.4.q){27 2:V=a.4||a;o(V.q!=2){8 w}R=S.1R(t).4;x=7.4[0]-V[0];y=7.4[1]-V[1];8 v.u([V[0]+R[0][0]*x+R[0][1]*y,V[1]+R[1][0]*x+R[1][1]*y]);1I;27 3:o(!a.U){8 w}9 C=a.1r(7).4;R=S.1R(t,a.U).4;x=7.4[0]-C[0];y=7.4[1]-C[1];z=7.4[2]-C[2];8 v.u([C[0]+R[0][0]*x+R[0][1]*y+R[0][2]*z,C[1]+R[1][0]*x+R[1][1]*y+R[1][2]*z,C[2]+R[2][0]*x+R[2][1]*y+R[2][2]*z]);1I;2P:8 w}},1t:l(a){o(a.K){9 P=7.4.2O();9 C=a.1r(P).4;8 v.u([C[0]+(C[0]-P[0]),C[1]+(C[1]-P[1]),C[2]+(C[2]-(P[2]||0))])}1d{9 Q=a.4||a;o(7.4.q!=Q.q){8 w}8 7.1b(l(x,i){8 Q[i-1]+(Q[i-1]-x)})}},1N:l(){9 V=7.1q();2S(V.4.q){27 3:1I;27 2:V.4.19(0);1I;2P:8 w}8 V},2n:l(){8'['+7.4.2K(', ')+']'},26:l(a){7.4=(a.4||a).2O();8 7}};v.u=l(a){9 V=25 v();8 V.26(a)};v.i=v.u([1,0,0]);v.j=v.u([0,1,0]);v.k=v.u([0,0,1]);v.2J=l(n){9 a=[];J{a.19(F.2F())}H(--n);8 v.u(a)};v.1j=l(n){9 a=[];J{a.19(0)}H(--n);8 v.u(a)};l S(){}S.23={e:l(i,j){o(i<1||i>7.4.q||j<1||j>7.4[0].q){8 w}8 7.4[i-1][j-1]},33:l(i){o(i>7.4.q){8 w}8 v.u(7.4[i-1])},2E:l(j){o(j>7.4[0].q){8 w}9 a=[],n=7.4.q,k=n,i;J{i=k-n;a.19(7.4[i][j-1])}H(--n);8 v.u(a)},2R:l(){8{2D:7.4.q,1p:7.4[0].q}},2D:l(){8 7.4.q},1p:l(){8 7.4[0].q},24:l(a){9 M=a.4||a;o(1g(M[0][0])=='1f'){M=S.u(M).4}o(7.4.q!=M.q||7.4[0].q!=M[0].q){8 1L}9 b=7.4.q,15=b,i,G,10=7.4[0].q,j;J{i=15-b;G=10;J{j=10-G;o(F.13(7.4[i][j]-M[i][j])>17.16){8 1L}}H(--G)}H(--b);8 2x},1q:l(){8 S.u(7.4)},1b:l(a){9 b=[],12=7.4.q,15=12,i,G,10=7.4[0].q,j;J{i=15-12;G=10;b[i]=[];J{j=10-G;b[i][j]=a(7.4[i][j],i+1,j+1)}H(--G)}H(--12);8 S.u(b)},2i:l(a){9 M=a.4||a;o(1g(M[0][0])=='1f'){M=S.u(M).4}8(7.4.q==M.q&&7.4[0].q==M[0].q)},2j:l(a){9 M=a.4||a;o(1g(M[0][0])=='1f'){M=S.u(M).4}o(!7.2i(M)){8 w}8 7.1b(l(x,i,j){8 x+M[i-1][j-1]})},2C:l(a){9 M=a.4||a;o(1g(M[0][0])=='1f'){M=S.u(M).4}o(!7.2i(M)){8 w}8 7.1b(l(x,i,j){8 x-M[i-1][j-1]})},2B:l(a){9 M=a.4||a;o(1g(M[0][0])=='1f'){M=S.u(M).4}8(7.4[0].q==M.q)},22:l(a){o(!a.4){8 7.1b(l(x){8 x*a})}9 b=a.1u?2x:1L;9 M=a.4||a;o(1g(M[0][0])=='1f'){M=S.u(M).4}o(!7.2B(M)){8 w}9 d=7.4.q,15=d,i,G,10=M[0].q,j;9 e=7.4[0].q,4=[],21,20,c;J{i=15-d;4[i]=[];G=10;J{j=10-G;21=0;20=e;J{c=e-20;21+=7.4[i][c]*M[c][j]}H(--20);4[i][j]=21}H(--G)}H(--d);9 M=S.u(4);8 b?M.2E(1):M},x:l(a){8 7.22(a)},32:l(a,b,c,d){9 e=[],12=c,i,G,j;9 f=7.4.q,1p=7.4[0].q;J{i=c-12;e[i]=[];G=d;J{j=d-G;e[i][j]=7.4[(a+i-1)%f][(b+j-1)%1p]}H(--G)}H(--12);8 S.u(e)},31:l(){9 a=7.4.q,1p=7.4[0].q;9 b=[],12=1p,i,G,j;J{i=1p-12;b[i]=[];G=a;J{j=a-G;b[i][j]=7.4[j][i]}H(--G)}H(--12);8 S.u(b)},1y:l(){8(7.4.q==7.4[0].q)},2A:l(){9 m=0,12=7.4.q,15=12,i,G,10=7.4[0].q,j;J{i=15-12;G=10;J{j=10-G;o(F.13(7.4[i][j])>F.13(m)){m=7.4[i][j]}}H(--G)}H(--12);8 m},2Z:l(x){9 a=w,12=7.4.q,15=12,i,G,10=7.4[0].q,j;J{i=15-12;G=10;J{j=10-G;o(7.4[i][j]==x){8{i:i+1,j:j+1}}}H(--G)}H(--12);8 w},30:l(){o(!7.1y){8 w}9 a=[],n=7.4.q,k=n,i;J{i=k-n;a.19(7.4[i][i])}H(--n);8 v.u(a)},1K:l(){9 M=7.1q(),1c;9 n=7.4.q,k=n,i,1s,1n=7.4[0].q,p;J{i=k-n;o(M.4[i][i]==0){2e(j=i+1;j<k;j++){o(M.4[j][i]!=0){1c=[];1s=1n;J{p=1n-1s;1c.19(M.4[i][p]+M.4[j][p])}H(--1s);M.4[i]=1c;1I}}}o(M.4[i][i]!=0){2e(j=i+1;j<k;j++){9 a=M.4[j][i]/M.4[i][i];1c=[];1s=1n;J{p=1n-1s;1c.19(p<=i?0:M.4[j][p]-M.4[i][p]*a)}H(--1s);M.4[j]=1c}}}H(--n);8 M},3h:l(){8 7.1K()},2z:l(){o(!7.1y()){8 w}9 M=7.1K();9 a=M.4[0][0],n=M.4.q-1,k=n,i;J{i=k-n+1;a=a*M.4[i][i]}H(--n);8 a},3f:l(){8 7.2z()},2y:l(){8(7.1y()&&7.2z()===0)},2Y:l(){o(!7.1y()){8 w}9 a=7.4[0][0],n=7.4.q-1,k=n,i;J{i=k-n+1;a+=7.4[i][i]}H(--n);8 a},3e:l(){8 7.2Y()},1Y:l(){9 M=7.1K(),1Y=0;9 a=7.4.q,15=a,i,G,10=7.4[0].q,j;J{i=15-a;G=10;J{j=10-G;o(F.13(M.4[i][j])>17.16){1Y++;1I}}H(--G)}H(--a);8 1Y},3d:l(){8 7.1Y()},2W:l(a){9 M=a.4||a;o(1g(M[0][0])=='1f'){M=S.u(M).4}9 T=7.1q(),1p=T.4[0].q;9 b=T.4.q,15=b,i,G,10=M[0].q,j;o(b!=M.q){8 w}J{i=15-b;G=10;J{j=10-G;T.4[i][1p+j]=M[i][j]}H(--G)}H(--b);8 T},2w:l(){o(!7.1y()||7.2y()){8 w}9 a=7.4.q,15=a,i,j;9 M=7.2W(S.I(a)).1K();9 b,1n=M.4[0].q,p,1c,2v;9 c=[],2c;J{i=a-1;1c=[];b=1n;c[i]=[];2v=M.4[i][i];J{p=1n-b;2c=M.4[i][p]/2v;1c.19(2c);o(p>=15){c[i].19(2c)}}H(--b);M.4[i]=1c;2e(j=0;j<i;j++){1c=[];b=1n;J{p=1n-b;1c.19(M.4[j][p]-M.4[i][p]*M.4[j][i])}H(--b);M.4[j]=1c}}H(--a);8 S.u(c)},3c:l(){8 7.2w()},2d:l(){8 7.1b(l(x){8 F.2d(x)})},2V:l(x){8 7.1b(l(p){8(F.13(p-x)<=17.16)?x:p})},2n:l(){9 a=[];9 n=7.4.q,k=n,i;J{i=k-n;a.19(v.u(7.4[i]).2n())}H(--n);8 a.2K('\\n')},26:l(a){9 i,4=a.4||a;o(1g(4[0][0])!='1f'){9 b=4.q,15=b,G,10,j;7.4=[];J{i=15-b;G=4[i].q;10=G;7.4[i]=[];J{j=10-G;7.4[i][j]=4[i][j]}H(--G)}H(--b);8 7}9 n=4.q,k=n;7.4=[];J{i=k-n;7.4.19([4[i]])}H(--n);8 7}};S.u=l(a){9 M=25 S();8 M.26(a)};S.I=l(n){9 a=[],k=n,i,G,j;J{i=k-n;a[i]=[];G=k;J{j=k-G;a[i][j]=(i==j)?1:0}H(--G)}H(--n);8 S.u(a)};S.2X=l(a){9 n=a.q,k=n,i;9 M=S.I(n);J{i=k-n;M.4[i][i]=a[i]}H(--n);8 M};S.1R=l(b,a){o(!a){8 S.u([[F.1H(b),-F.1G(b)],[F.1G(b),F.1H(b)]])}9 d=a.1q();o(d.4.q!=3){8 w}9 e=d.1u();9 x=d.4[0]/e,y=d.4[1]/e,z=d.4[2]/e;9 s=F.1G(b),c=F.1H(b),t=1-c;8 S.u([[t*x*x+c,t*x*y-s*z,t*x*z+s*y],[t*x*y+s*z,t*y*y+c,t*y*z-s*x],[t*x*z-s*y,t*y*z+s*x,t*z*z+c]])};S.3b=l(t){9 c=F.1H(t),s=F.1G(t);8 S.u([[1,0,0],[0,c,-s],[0,s,c]])};S.39=l(t){9 c=F.1H(t),s=F.1G(t);8 S.u([[c,0,s],[0,1,0],[-s,0,c]])};S.38=l(t){9 c=F.1H(t),s=F.1G(t);8 S.u([[c,-s,0],[s,c,0],[0,0,1]])};S.2J=l(n,m){8 S.1j(n,m).1b(l(){8 F.2F()})};S.1j=l(n,m){9 a=[],12=n,i,G,j;J{i=n-12;a[i]=[];G=m;J{j=m-G;a[i][j]=0}H(--G)}H(--12);8 S.u(a)};l 14(){}14.23={24:l(a){8(7.1m(a)&&7.1h(a.K))},1q:l(){8 14.u(7.K,7.U)},2U:l(a){9 V=a.4||a;8 14.u([7.K.4[0]+V[0],7.K.4[1]+V[1],7.K.4[2]+(V[2]||0)],7.U)},1m:l(a){o(a.W){8 a.1m(7)}9 b=7.U.1C(a.U);8(F.13(b)<=17.16||F.13(b-F.1A)<=17.16)},1o:l(a){o(a.W){8 a.1o(7)}o(a.U){o(7.1m(a)){8 7.1o(a.K)}9 N=7.U.2f(a.U).2q().4;9 A=7.K.4,B=a.K.4;8 F.13((A[0]-B[0])*N[0]+(A[1]-B[1])*N[1]+(A[2]-B[2])*N[2])}1d{9 P=a.4||a;9 A=7.K.4,D=7.U.4;9 b=P[0]-A[0],2a=P[1]-A[1],29=(P[2]||0)-A[2];9 c=F.1x(b*b+2a*2a+29*29);o(c===0)8 0;9 d=(b*D[0]+2a*D[1]+29*D[2])/c;9 e=1-d*d;8 F.13(c*F.1x(e<0?0:e))}},1h:l(a){9 b=7.1o(a);8(b!==w&&b<=17.16)},2T:l(a){8 a.1h(7)},1v:l(a){o(a.W){8 a.1v(7)}8(!7.1m(a)&&7.1o(a)<=17.16)},1U:l(a){o(a.W){8 a.1U(7)}o(!7.1v(a)){8 w}9 P=7.K.4,X=7.U.4,Q=a.K.4,Y=a.U.4;9 b=X[0],1z=X[1],1B=X[2],1T=Y[0],1S=Y[1],1M=Y[2];9 c=P[0]-Q[0],2s=P[1]-Q[1],2r=P[2]-Q[2];9 d=-b*c-1z*2s-1B*2r;9 e=1T*c+1S*2s+1M*2r;9 f=b*b+1z*1z+1B*1B;9 g=1T*1T+1S*1S+1M*1M;9 h=b*1T+1z*1S+1B*1M;9 k=(d*g/f+h*e)/(g-h*h);8 v.u([P[0]+k*b,P[1]+k*1z,P[2]+k*1B])},1r:l(a){o(a.U){o(7.1v(a)){8 7.1U(a)}o(7.1m(a)){8 w}9 D=7.U.4,E=a.U.4;9 b=D[0],1l=D[1],1k=D[2],1P=E[0],1O=E[1],1Q=E[2];9 x=(1k*1P-b*1Q),y=(b*1O-1l*1P),z=(1l*1Q-1k*1O);9 N=v.u([x*1Q-y*1O,y*1P-z*1Q,z*1O-x*1P]);9 P=11.u(a.K,N);8 P.1U(7)}1d{9 P=a.4||a;o(7.1h(P)){8 v.u(P)}9 A=7.K.4,D=7.U.4;9 b=D[0],1l=D[1],1k=D[2],1w=A[0],18=A[1],1a=A[2];9 x=b*(P[1]-18)-1l*(P[0]-1w),y=1l*((P[2]||0)-1a)-1k*(P[1]-18),z=1k*(P[0]-1w)-b*((P[2]||0)-1a);9 V=v.u([1l*x-1k*z,1k*y-b*x,b*z-1l*y]);9 k=7.1o(P)/V.1u();8 v.u([P[0]+V.4[0]*k,P[1]+V.4[1]*k,(P[2]||0)+V.4[2]*k])}},1V:l(t,a){o(1g(a.U)=='1f'){a=14.u(a.1N(),v.k)}9 R=S.1R(t,a.U).4;9 C=a.1r(7.K).4;9 A=7.K.4,D=7.U.4;9 b=C[0],1E=C[1],1J=C[2],1w=A[0],18=A[1],1a=A[2];9 x=1w-b,y=18-1E,z=1a-1J;8 14.u([b+R[0][0]*x+R[0][1]*y+R[0][2]*z,1E+R[1][0]*x+R[1][1]*y+R[1][2]*z,1J+R[2][0]*x+R[2][1]*y+R[2][2]*z],[R[0][0]*D[0]+R[0][1]*D[1]+R[0][2]*D[2],R[1][0]*D[0]+R[1][1]*D[1]+R[1][2]*D[2],R[2][0]*D[0]+R[2][1]*D[1]+R[2][2]*D[2]])},1t:l(a){o(a.W){9 A=7.K.4,D=7.U.4;9 b=A[0],18=A[1],1a=A[2],2N=D[0],1l=D[1],1k=D[2];9 c=7.K.1t(a).4;9 d=b+2N,2h=18+1l,2o=1a+1k;9 Q=a.1r([d,2h,2o]).4;9 e=[Q[0]+(Q[0]-d)-c[0],Q[1]+(Q[1]-2h)-c[1],Q[2]+(Q[2]-2o)-c[2]];8 14.u(c,e)}1d o(a.U){8 7.1V(F.1A,a)}1d{9 P=a.4||a;8 14.u(7.K.1t([P[0],P[1],(P[2]||0)]),7.U)}},1Z:l(a,b){a=v.u(a);b=v.u(b);o(a.4.q==2){a.4.19(0)}o(b.4.q==2){b.4.19(0)}o(a.4.q>3||b.4.q>3){8 w}9 c=b.1u();o(c===0){8 w}7.K=a;7.U=v.u([b.4[0]/c,b.4[1]/c,b.4[2]/c]);8 7}};14.u=l(a,b){9 L=25 14();8 L.1Z(a,b)};14.X=14.u(v.1j(3),v.i);14.Y=14.u(v.1j(3),v.j);14.Z=14.u(v.1j(3),v.k);l 11(){}11.23={24:l(a){8(7.1h(a.K)&&7.1m(a))},1q:l(){8 11.u(7.K,7.W)},2U:l(a){9 V=a.4||a;8 11.u([7.K.4[0]+V[0],7.K.4[1]+V[1],7.K.4[2]+(V[2]||0)],7.W)},1m:l(a){9 b;o(a.W){b=7.W.1C(a.W);8(F.13(b)<=17.16||F.13(F.1A-b)<=17.16)}1d o(a.U){8 7.W.2k(a.U)}8 w},2k:l(a){9 b=7.W.1C(a.W);8(F.13(F.1A/2-b)<=17.16)},1o:l(a){o(7.1v(a)||7.1h(a)){8 0}o(a.K){9 A=7.K.4,B=a.K.4,N=7.W.4;8 F.13((A[0]-B[0])*N[0]+(A[1]-B[1])*N[1]+(A[2]-B[2])*N[2])}1d{9 P=a.4||a;9 A=7.K.4,N=7.W.4;8 F.13((A[0]-P[0])*N[0]+(A[1]-P[1])*N[1]+(A[2]-(P[2]||0))*N[2])}},1h:l(a){o(a.W){8 w}o(a.U){8(7.1h(a.K)&&7.1h(a.K.2j(a.U)))}1d{9 P=a.4||a;9 A=7.K.4,N=7.W.4;9 b=F.13(N[0]*(A[0]-P[0])+N[1]*(A[1]-P[1])+N[2]*(A[2]-(P[2]||0)));8(b<=17.16)}},1v:l(a){o(1g(a.U)=='1f'&&1g(a.W)=='1f'){8 w}8!7.1m(a)},1U:l(a){o(!7.1v(a)){8 w}o(a.U){9 A=a.K.4,D=a.U.4,P=7.K.4,N=7.W.4;9 b=(N[0]*(P[0]-A[0])+N[1]*(P[1]-A[1])+N[2]*(P[2]-A[2]))/(N[0]*D[0]+N[1]*D[1]+N[2]*D[2]);8 v.u([A[0]+D[0]*b,A[1]+D[1]*b,A[2]+D[2]*b])}1d o(a.W){9 c=7.W.2f(a.W).2q();9 N=7.W.4,A=7.K.4,O=a.W.4,B=a.K.4;9 d=S.1j(2,2),i=0;H(d.2y()){i++;d=S.u([[N[i%3],N[(i+1)%3]],[O[i%3],O[(i+1)%3]]])}9 e=d.2w().4;9 x=N[0]*A[0]+N[1]*A[1]+N[2]*A[2];9 y=O[0]*B[0]+O[1]*B[1]+O[2]*B[2];9 f=[e[0][0]*x+e[0][1]*y,e[1][0]*x+e[1][1]*y];9 g=[];2e(9 j=1;j<=3;j++){g.19((i==j)?0:f[(j+(5-i)%3)%3])}8 14.u(g,c)}},1r:l(a){9 P=a.4||a;9 A=7.K.4,N=7.W.4;9 b=(A[0]-P[0])*N[0]+(A[1]-P[1])*N[1]+(A[2]-(P[2]||0))*N[2];8 v.u([P[0]+N[0]*b,P[1]+N[1]*b,(P[2]||0)+N[2]*b])},1V:l(t,a){9 R=S.1R(t,a.U).4;9 C=a.1r(7.K).4;9 A=7.K.4,N=7.W.4;9 b=C[0],1E=C[1],1J=C[2],1w=A[0],18=A[1],1a=A[2];9 x=1w-b,y=18-1E,z=1a-1J;8 11.u([b+R[0][0]*x+R[0][1]*y+R[0][2]*z,1E+R[1][0]*x+R[1][1]*y+R[1][2]*z,1J+R[2][0]*x+R[2][1]*y+R[2][2]*z],[R[0][0]*N[0]+R[0][1]*N[1]+R[0][2]*N[2],R[1][0]*N[0]+R[1][1]*N[1]+R[1][2]*N[2],R[2][0]*N[0]+R[2][1]*N[1]+R[2][2]*N[2]])},1t:l(a){o(a.W){9 A=7.K.4,N=7.W.4;9 b=A[0],18=A[1],1a=A[2],2M=N[0],2L=N[1],2Q=N[2];9 c=7.K.1t(a).4;9 d=b+2M,2p=18+2L,2m=1a+2Q;9 Q=a.1r([d,2p,2m]).4;9 e=[Q[0]+(Q[0]-d)-c[0],Q[1]+(Q[1]-2p)-c[1],Q[2]+(Q[2]-2m)-c[2]];8 11.u(c,e)}1d o(a.U){8 7.1V(F.1A,a)}1d{9 P=a.4||a;8 11.u(7.K.1t([P[0],P[1],(P[2]||0)]),7.W)}},1Z:l(a,b,c){a=v.u(a);a=a.1N();o(a===w){8 w}b=v.u(b);b=b.1N();o(b===w){8 w}o(1g(c)=='1f'){c=w}1d{c=v.u(c);c=c.1N();o(c===w){8 w}}9 d=a.4[0],18=a.4[1],1a=a.4[2];9 e=b.4[0],1W=b.4[1],1X=b.4[2];9 f,1i;o(c!==w){9 g=c.4[0],2l=c.4[1],2t=c.4[2];f=v.u([(1W-18)*(2t-1a)-(1X-1a)*(2l-18),(1X-1a)*(g-d)-(e-d)*(2t-1a),(e-d)*(2l-18)-(1W-18)*(g-d)]);1i=f.1u();o(1i===0){8 w}f=v.u([f.4[0]/1i,f.4[1]/1i,f.4[2]/1i])}1d{1i=F.1x(e*e+1W*1W+1X*1X);o(1i===0){8 w}f=v.u([b.4[0]/1i,b.4[1]/1i,b.4[2]/1i])}7.K=a;7.W=f;8 7}};11.u=l(a,b,c){9 P=25 11();8 P.1Z(a,b,c)};11.2I=11.u(v.1j(3),v.k);11.2H=11.u(v.1j(3),v.i);11.2G=11.u(v.1j(3),v.j);11.36=11.2I;11.35=11.2H;11.3j=11.2G;9 $V=v.u;9 $M=S.u;9 $L=14.u;9 $P=11.u;",62,206,"||||elements|||this|return|var||||||||||||function|||if||length||||create|Vector|null|||||||||Math|nj|while||do|anchor||||||||Matrix||direction||normal||||kj|Plane|ni|abs|Line|ki|precision|Sylvester|A2|push|A3|map|els|else||undefined|typeof|contains|mod|Zero|D3|D2|isParallelTo|kp|distanceFrom|cols|dup|pointClosestTo|np|reflectionIn|modulus|intersects|A1|sqrt|isSquare|X2|PI|X3|angleFrom|mod1|C2|mod2|sin|cos|break|C3|toRightTriangular|false|Y3|to3D|E2|E1|E3|Rotation|Y2|Y1|intersectionWith|rotate|v12|v13|rank|setVectors|nc|sum|multiply|prototype|eql|new|setElements|case|each|PA3|PA2|part|new_element|round|for|cross|product|AD2|isSameSizeAs|add|isPerpendicularTo|v22|AN3|inspect|AD3|AN2|toUnitVector|PsubQ3|PsubQ2|v23|dot|divisor|inverse|true|isSingular|determinant|max|canMultiplyFromLeft|subtract|rows|col|random|ZX|YZ|XY|Random|join|N2|N1|D1|slice|default|N3|dimensions|switch|liesIn|translate|snapTo|augment|Diagonal|trace|indexOf|diagonal|transpose|minor|row|isAntiparallelTo|ZY|YX|acos|RotationZ|RotationY|liesOn|RotationX|inv|rk|tr|det|toDiagonalMatrix|toUpperTriangular|version|XZ".split("|"),0,{})),function(){var e=this.SpriteLoader={};e.preload=function(t,i){"string"==typeof t&&(t=[t]);var n,o={callback:i,numLoaded:0,numImages:t.length,images:[]};for(n=0;t.length>n;n+=1)e.load(t[n],o)},e.load=function(e,t){var i=new Image;t.images.push(i),i.onload=function(){t.numLoaded+=1,t.numLoaded===t.numImages&&t.callback(t.images),"function"==typeof window.updateLoader&&window.updateLoader(""+Math.floor(100*t.numLoaded/t.numImages)+"%")},i.src=e}}(),function(e,t){var i=t.SpriteSpin={},n=i.api={};i.modules={},i.behaviors={},i.updateInput=function(e,t){return void 0===e.touches&&void 0!==e.originalEvent&&(e.touches=e.originalEvent.touches),t.oldX=t.currentX,t.oldY=t.currentY,void 0!==e.touches&&e.touches.length>0?(t.currentX=e.touches[0].clientX,t.currentY=e.touches[0].clientY):(t.currentX=e.clientX,t.currentY=e.clientY),(void 0===t.startX||void 0===t.startY)&&(t.startX=t.currentX,t.startY=t.currentY,t.clickframe=t.frame),(void 0===t.oldX||void 0===t.oldY)&&(t.oldX=t.currentX,t.oldY=t.currentY),t.dX=t.currentX-t.startX,t.dY=t.currentY-t.startY,t.dW=t.dX*t.dragDirX+t.dY*t.dragDirY,t.ddX=t.currentX-t.oldX,t.ddY=t.currentY-t.oldY,t.ddW=t.ddX*t.dragDirX+t.ddY*t.dragDirY,!1},i.resetInput=function(e){e.startX=void 0,e.startY=void 0,e.currentX=void 0,e.currentY=void 0,e.oldX=void 0,e.oldY=void 0,e.dX=0,e.dY=0,e.dW=0,e.ddX=0,e.ddY=0,e.ddW=0,"function"==typeof e.module.resetInput&&e.module.resetInput(e)},i.clamp=function(e,t,i){return e>i?i:t>e?t:e},i.wrap=function(e,t,i,n){for(;e>i;)e-=n;for(;t>e;)e+=n;return e},i.reload=function(e,t){t&&e.module.initialize&&e.module.initialize(e),i.prepareBackground(e),i.preloadImages(e,function(){i.rebindEvents(e),e.module.reload(e),e.target.trigger("onLoad",e)})},i.preloadImages=function(e,t){e.preload.fadeIn(250,function(){SpriteLoader.preload(e.source,function(i){e.preload.fadeOut(250),e.stage.show(),e.canvas&&e.canvas.show(),e.images=i,t.apply(e.target,[e])})})},i.prepareBackground=function(t){var i=[t.width,"px"].join(""),n=[t.height,"px"].join("");t.target.css({width:i,height:n,position:"relative"});var o={width:i,height:n,top:"0px",left:"0px",position:"absolute"};e.extend(o,t.preloadCSS||{}),t.preload.css(o).html(t.preloadHtml||"").hide(),t.stage.css({width:i,height:n,top:"0px",left:"0px",position:"absolute"}).hide(),t.canvas&&(t.canvas[0].width=t.width,t.canvas[0].height=t.height,t.canvas.css({width:i,height:n,top:"0px",left:"0px",position:"absolute"}).hide())},i.draw=function(e){e.module.draw(e)},i.rebindEvents=function(t){var n=t.target;n.unbind(".spritespin");var o=t.behavior;"string"==typeof t.behavior&&(o=i.behaviors[t.behavior]),o=o||{};var a=function(e){return e.cancelable&&e.preventDefault(),!1};n.bind("mousedown.spritespin",o.mousedown||e.noop),n.bind("mousemove.spritespin",o.mousemove||e.noop),n.bind("mouseup.spritespin",o.mouseup||e.noop),n.bind("mouseenter.spritespin",o.mouseenter||e.noop),n.bind("mouseover.spritespin",o.mouseover||e.noop),n.bind("mouseleave.spritespin",o.mouseleave||e.noop),n.bind("dblclick.spritespin",o.dblclick||e.noop),n.bind("onFrame.spritespin",o.onFrame||e.noop),t.touchable&&(n.bind("touchstart.spritespin",o.mousedown||e.noop),n.bind("touchmove.spritespin",o.mousemove||e.noop),n.bind("touchend.spritespin",o.mouseup||e.noop),n.bind("touchcancel.spritespin",o.mouseleave||e.noop),n.bind("click.spritespin",a),n.bind("gesturestart.spritespin",a),n.bind("gesturechange.spritespin",a),n.bind("gestureend.spritespin",a)),n.bind("mousedown.spritespin selectstart.spritespin",a),n.bind("onFrame.spritespin",function(e,t){i.draw(t)}),n.bind("onLoad.spritespin",function(e,t){t.target.spritespin("animate",t.animate,t.loop)}),"function"==typeof t.onFrame&&n.bind("onFrame.spritespin",t.onFrame),"function"==typeof t.onLoad&&n.bind("onLoad.spritespin",t.onLoad)},e.fn.spritespin=function(t){return n[t]?n[t].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof t&&t?(e.error("Method "+t+" does not exist on jQuery.spritespin"),void 0):n.init.apply(this,arguments)},n.init=function(i){var n={width:void 0,height:void 0,frames:36,frame:0,module:"360",behavior:"drag",animate:!0,loop:!1,loopFrame:0,frameStep:1,frameTime:36,frameWrap:!0,reverse:!1,sense:1,orientation:"horizontal",source:void 0,preloadHtml:void 0,preloadCSS:void 0,onFrame:void 0,onLoad:void 0,touchable:void 0};return i=i||{},e.extend(n,i),this.each(function(){var o=e(this),a=o.data("spritespin");if(a)e.extend(a,i),i.source?SpriteSpin.reload(a):o.spritespin("animate",a.animate,a.loop);else{var s=o.find("img"),r=0;if(s.length>0)for(n.source=[],r=0;s.length>r;r+=1)n.source.push(e(s[r]).attr("src"));if("string"==typeof n.source&&(n.source=[n.source]),o.attr("unselectable","on").css({overflow:"hidden",position:"relative"}),o.empty(),o.append(e("<div class='spritespin-stage'/>")),o.append(e("<div class='spritespin-preload'/>")),o.addClass("spritespin-instance"),n.enableCanvas){var l=e("<canvas class='spritespin-canvas'/>")[0],u=!(!l.getContext||!l.getContext("2d"));u&&(n.canvas=e(l),n.context=l.getContext("2d"),o.append(n.canvas))}"string"==typeof n.module&&(n.module=SpriteSpin.modules[n.module]),n.target=o,n.stage=o.find(".spritespin-stage"),n.preload=o.find(".spritespin-preload"),n.animation=null,n.touchable=n.touchable||/iphone|ipod|ipad|android/i.test(t.navigator.userAgent),o.data("spritespin",n),SpriteSpin.reload(n,!0)}})},n.destroy=function(){return this.each(function(){var t=e(this);t.unbind(".spritespin"),t.removeData("spritespin")})},n.update=function(t){return this.each(function(){var o=e(this),a=o.data("spritespin");void 0===t?a.frame+=a.animation&&a.reverse?-a.frameStep:a.frameStep:a.frame=t,a.frame=a.animation||!a.animation&&a.frameWrap?i.wrap(a.frame,0,a.frames-1,a.frames):i.clamp(a.frame,0,a.frames-1),!a.loop&&a.animation&&a.frame===a.loopFrame&&n.animate.apply(a.target,[!1]),a.target.trigger("onFrame",a)})},n.animate=function(i,n){return void 0===i?null!==e(this).data("spritespin").animation:this.each(function(){var o=e(this),a=o.data("spritespin");"boolean"==typeof n&&(a.loop=n),"toggle"===i&&(a.animate=!a.animate),"boolean"==typeof i&&(a.animate=i),a.animation&&(t.clearInterval(a.animation),a.animation=null),a.animate&&(a.animation=t.setInterval(function(){try{o.spritespin("update")}catch(e){}},a.frameTime))})},n.frame=function(t){return void 0===t?e(this).data("spritespin").frame:this.each(function(){e(this).spritespin("update",t)})},n.loop=function(t){return void 0===t?e(this).data("spritespin").loop:this.each(function(){var i=e(this);i.spritespin("animate",i.data("spritespin").animate,t)})},n.next=function(){return this.each(function(){var t=e(this);t.spritespin("frame",t.spritespin("frame")+1)})},n.prev=function(){return this.each(function(){var t=e(this);t.spritespin("frame",t.spritespin("frame")-1)})},n.animateTo=function(t){return this.each(function(){var i=e(this);i.spritespin({animate:!0,loop:!1,loopFrame:t})})},i.behaviors.none={name:"none",mousedown:e.noop,mousemove:e.noop,mouseup:e.noop,mouseenter:e.noop,mouseover:e.noop,mouseleave:e.noop,dblclick:e.noop,onFrame:e.noop}}(jQuery,window),function(){var e=this.SpriteLoader={};e.preload=function(t,i){"string"==typeof t&&(t=[t]);var n,o={callback:i,numLoaded:0,numImages:t.length,images:[]};for(n=0;t.length>n;n+=1)e.load(t[n],o)},e.load=function(e,t){var i=new Image;t.images.push(i),i.onload=function(){t.numLoaded+=1,t.numLoaded===t.numImages&&t.callback(t.images),"function"==typeof window.updateLoader&&window.updateLoader(""+Math.floor(100*t.numLoaded/t.numImages)+"%")},i.src=e}}(),function(e,t,i){i.behaviors.click={name:"click",mouseup:function(t){var n=e(this),o=n.data("spritespin");i.updateInput(t,o),n.spritespin("animate",!1);var a,s,r=o.target.offset();"horizontal"==o.orientation?(a=o.width/2,s=o.currentX-r.left):(a=o.height/2,s=o.currentY-r.top),s>a?(n.spritespin("frame",o.frame+1),o.reverse=!1):(n.spritespin("frame",o.frame-1),o.reverse=!0)}}}(jQuery,window,window.SpriteSpin),function(e,t,i){i.behaviors.drag={name:"drag",mousedown:function(t){var n=e(this),o=n.data("spritespin");i.updateInput(t,o),o.onDrag=!0},mousemove:function(t){var n=e(this),o=n.data("spritespin");if(o.onDrag){i.updateInput(t,o);var a;a="horizontal"==o.orientation?o.dX/o.width:o.dY/o.height;var s=a*o.frames*o.sense,r=Math.round(o.clickframe+s);n.spritespin("update",r),n.spritespin("animate",!1)}},mouseup:function(){var t=e(this),n=t.data("spritespin");i.resetInput(n),n.onDrag=!1},mouseleave:function(){var t=e(this),n=t.data("spritespin");i.resetInput(n),n.onDrag=!1}}}(jQuery,window,window.SpriteSpin),function(e,t,i){i.behaviors.hold={name:"hold",mousedown:function(t){var n=e(this),o=n.data("spritespin");i.updateInput(t,o),o.onDrag=!0,n.spritespin("animate",!0)},mousemove:function(t){var n=e(this),o=n.data("spritespin");if(o.onDrag){i.updateInput(t,o);var a,s,r=o.target.offset();"horizontal"==o.orientation?(a=o.width/2,s=(o.currentX-r.left-a)/a):(a=o.height/2,s=(o.currentY-r.top-a)/a),o.reverse=0>s,s=0>s?-s:s,o.frameTime=80*(1-s)+20}},mouseup:function(){var t=e(this),n=t.data("spritespin");i.resetInput(n),n.onDrag=!1,t.spritespin("animate",!1)},mouseleave:function(){var t=e(this),n=t.data("spritespin");i.resetInput(n),n.onDrag=!1,t.spritespin("animate",!1)},onFrame:function(){var t=e(this);t.spritespin("animate",!0)}}}(jQuery,window,window.SpriteSpin),function(e,t,i){i.behaviors.swipe={name:"swipe",mousedown:function(t){var n=e(this),o=n.data("spritespin");i.updateInput(t,o),o.onDrag=!0},mousemove:function(t){var n=e(this),o=n.data("spritespin");if(o.onDrag){i.updateInput(t,o);var a,s,r=o.frame,l=o.snap||.25;"horizontal"==o.orientation?(a=o.dX,s=o.width*l):(a=o.dY,s=o.height*l),a>s?(r=o.frame-1,o.onDrag=!1):-s>a&&(r=o.frame+1,o.onDrag=!1),n.spritespin("update",r),n.spritespin("animate",!1)}},mouseup:function(){var t=e(this),n=t.data("spritespin");n.onDrag=!1,i.resetInput(n)},mouseleave:function(){var t=e(this),n=t.data("spritespin");n.onDrag=!1,i.resetInput(n)}}}(jQuery,window,window.SpriteSpin),function(e,t){var i=t.SpriteSpin.modules["360"]={};i.reload=function(e){e.stage.empty(),e.modopts={gridsheet:1==e.images.length,resX:e.resolutionX||e.images[0].width,resY:e.resolutionY||e.images[0].height,offX:e.offsetX||0,offY:e.offsetY||0,stepX:e.stepX||e.width,stepY:e.stepY||e.height,numFramesX:e.framesX||e.frames,oldFrame:e.frame},i.draw(e)},i.draw=function(e){var t=e.modopts;if(t.gridsheet){var i=e.source[0],n=e.frame%t.numFramesX,o=0|e.frame/t.numFramesX,a=t.offX+n*t.stepX,s=t.offY+o*t.stepY;e.canvas?e.context.drawImage(e.images[0],a,s,e.width,e.height,0,0,e.width,e.height):e.stage.css({width:[e.width,"px"].join(""),height:[e.height,"px"].join(""),"background-image":["url('",i,"')"].join(""),"background-repeat":"no-repeat","background-position":[-a,"px ",-s,"px"].join(""),"-webkit-background-size":[t.resX,"px ",t.resY,"px"].join("")})
}else e.canvas?(e.context.clearRect(0,0,t.resX,t.resY),e.context.drawImage(e.images[e.frame],0,0)):e.stage.css({width:[e.width,"px"].join(""),height:[e.height,"px"].join(""),"background-image":["url('",e.source[e.frame],"')"].join(""),"background-repeat":"no-repeat","-webkit-background-size":[t.resX,"px ",t.resY,"px"].join("")})}}(window.jQuery,window),function(e,t){var i=t.SpriteSpin.modules.gallery={};i.reload=function(t){t.images=[],t.offsets=[],t.stage.empty(),t.speed=500,t.opacity=.25,t.oldFrame=0;var i=0,n=0;for(n=0;t.source.length>n;n+=1){var o=e("<img src='"+t.source[n]+"'/>");t.stage.append(o),t.images.push(o),t.offsets.push(-i+(t.width-o[0].width)/2),i+=o[0].width,o.css({opacity:.25})}t.stage.css({width:i}),t.images[t.oldFrame].animate({opacity:1},t.speed)},i.draw=function(e){e.oldFrame!=e.frame&&e.offsets?(e.stage.stop(!0,!1),e.stage.animate({left:e.offsets[e.frame]},e.speed),e.images[e.oldFrame].animate({opacity:e.opacity},e.speed),e.oldFrame=e.frame,e.images[e.oldFrame].animate({opacity:1},e.speed)):e.stage.css({left:e.offsets[e.frame]+e.dX})},i.resetInput=function(e){e.onDrag||e.stage.animate({left:e.offsets[e.frame]})}}(jQuery,window),function(e,t){var i=t.SpriteSpin.modules.panorama={};i.reload=function(e){e.stage.empty();var t=e.modopts={};t.resX=e.resolutionX||e.images[0].width,t.resY=e.resolutionY||e.images[0].height,t.frames="horizontal"==e.orientation?e.frames||t.resX:e.frames||t.resY,i.draw(e)},i.draw=function(e){var t,i,n=e.modopts;"horizontal"==e.orientation?(t=e.frame%n.frames,i=0):(t=0,i=e.frame%n.frames),e.stage.css({width:[e.width,"px"].join(""),height:[e.height,"px"].join(""),"background-image":["url('",e.source[0],"')"].join(""),"background-repeat":"repeat-both","background-position":[-t,"px ",-i,"px"].join(""),"-webkit-background-size":[n.resX,"px ",n.resY,"px"].join("")})}}(window.jQuery,window);var swfobject=function(){function e(){if(!q){try{var e=V.getElementsByTagName("body")[0].appendChild(v("span"));e.parentNode.removeChild(e)}catch(t){return}q=!0;for(var i=W.length,n=0;i>n;n++)W[n]()}}function t(e){q?e():W[W.length]=e}function i(e){if(typeof N.addEventListener!=F)N.addEventListener("load",e,!1);else if(typeof V.addEventListener!=F)V.addEventListener("load",e,!1);else if(typeof N.attachEvent!=F)g(N,"onload",e);else if("function"==typeof N.onload){var t=N.onload;N.onload=function(){t(),e()}}else N.onload=e}function n(){B?o():a()}function o(){var e=V.getElementsByTagName("body")[0],t=v(P);t.setAttribute("type",$);var i=e.appendChild(t);if(i){var n=0;(function(){if(typeof i.GetVariable!=F){var o=i.GetVariable("$version");o&&(o=o.split(" ")[1].split(","),O.pv=[parseInt(o[0],10),parseInt(o[1],10),parseInt(o[2],10)])}else if(10>n)return n++,setTimeout(arguments.callee,10),void 0;e.removeChild(t),i=null,a()})()}else a()}function a(){var e=z.length;if(e>0)for(var t=0;e>t;t++){var i=z[t].id,n=z[t].callbackFn,o={success:!1,id:i};if(O.pv[0]>0){var a=f(i);if(a)if(!y(z[t].swfVersion)||O.wk&&312>O.wk)if(z[t].expressInstall&&r()){var d={};d.data=z[t].expressInstall,d.width=a.getAttribute("width")||"0",d.height=a.getAttribute("height")||"0",a.getAttribute("class")&&(d.styleclass=a.getAttribute("class")),a.getAttribute("align")&&(d.align=a.getAttribute("align"));for(var c={},p=a.getElementsByTagName("param"),h=p.length,m=0;h>m;m++)"movie"!=p[m].getAttribute("name").toLowerCase()&&(c[p[m].getAttribute("name")]=p[m].getAttribute("value"));l(d,c,i,n)}else u(a),n&&n(o);else w(i,!0),n&&(o.success=!0,o.ref=s(i),n(o))}else if(w(i,!0),n){var v=s(i);v&&typeof v.SetVariable!=F&&(o.success=!0,o.ref=v),n(o)}}}function s(e){var t=null,i=f(e);if(i&&"OBJECT"==i.nodeName)if(typeof i.SetVariable!=F)t=i;else{var n=i.getElementsByTagName(P)[0];n&&(t=n)}return t}function r(){return!Y&&y("6.0.65")&&(O.win||O.mac)&&!(O.wk&&312>O.wk)}function l(e,t,i,n){Y=!0,S=n||null,T={success:!1,id:i};var o=f(i);if(o){"OBJECT"==o.nodeName?(k=d(o),x=null):(k=o,x=i),e.id=I,(typeof e.width==F||!/%$/.test(e.width)&&310>parseInt(e.width,10))&&(e.width="310"),(typeof e.height==F||!/%$/.test(e.height)&&137>parseInt(e.height,10))&&(e.height="137"),V.title=V.title.slice(0,47)+" - Flash Player Installation";var a=O.ie&&O.win?"ActiveX":"PlugIn",s="MMredirectURL="+(""+N.location).replace(/&/g,"%26")+"&MMplayerType="+a+"&MMdoctitle="+V.title;if(typeof t.flashvars!=F?t.flashvars+="&"+s:t.flashvars=s,O.ie&&O.win&&4!=o.readyState){var r=v("div");i+="SWFObjectNew",r.setAttribute("id",i),o.parentNode.insertBefore(r,o),o.style.display="none",function(){4==o.readyState?o.parentNode.removeChild(o):setTimeout(arguments.callee,10)}()}c(e,t,i)}}function u(e){if(O.ie&&O.win&&4!=e.readyState){var t=v("div");e.parentNode.insertBefore(t,e),t.parentNode.replaceChild(d(e),t),e.style.display="none",function(){4==e.readyState?e.parentNode.removeChild(e):setTimeout(arguments.callee,10)}()}else e.parentNode.replaceChild(d(e),e)}function d(e){var t=v("div");if(O.win&&O.ie)t.innerHTML=e.innerHTML;else{var i=e.getElementsByTagName(P)[0];if(i){var n=i.childNodes;if(n)for(var o=n.length,a=0;o>a;a++)1==n[a].nodeType&&"PARAM"==n[a].nodeName||8==n[a].nodeType||t.appendChild(n[a].cloneNode(!0))}}return t}function c(e,t,i){var n,o=f(i);if(O.wk&&312>O.wk)return n;if(o)if(typeof e.id==F&&(e.id=i),O.ie&&O.win){var a="";for(var s in e)e[s]!=Object.prototype[s]&&("data"==s.toLowerCase()?t.movie=e[s]:"styleclass"==s.toLowerCase()?a+=' class="'+e[s]+'"':"classid"!=s.toLowerCase()&&(a+=" "+s+'="'+e[s]+'"'));var r="";for(var l in t)t[l]!=Object.prototype[l]&&(r+='<param name="'+l+'" value="'+t[l]+'" />');o.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+a+">"+r+"</object>",D[D.length]=e.id,n=f(e.id)}else{var u=v(P);u.setAttribute("type",$);for(var d in e)e[d]!=Object.prototype[d]&&("styleclass"==d.toLowerCase()?u.setAttribute("class",e[d]):"classid"!=d.toLowerCase()&&u.setAttribute(d,e[d]));for(var c in t)t[c]!=Object.prototype[c]&&"movie"!=c.toLowerCase()&&p(u,c,t[c]);o.parentNode.replaceChild(u,o),n=u}return n}function p(e,t,i){var n=v("param");n.setAttribute("name",t),n.setAttribute("value",i),e.appendChild(n)}function h(e){var t=f(e);t&&"OBJECT"==t.nodeName&&(O.ie&&O.win?(t.style.display="none",function(){4==t.readyState?m(e):setTimeout(arguments.callee,10)}()):t.parentNode.removeChild(t))}function m(e){var t=f(e);if(t){for(var i in t)"function"==typeof t[i]&&(t[i]=null);t.parentNode.removeChild(t)}}function f(e){var t=null;try{t=V.getElementById(e)}catch(i){}return t}function v(e){return V.createElement(e)}function g(e,t,i){e.attachEvent(t,i),R[R.length]=[e,t,i]}function y(e){var t=O.pv,i=e.split(".");return i[0]=parseInt(i[0],10),i[1]=parseInt(i[1],10)||0,i[2]=parseInt(i[2],10)||0,t[0]>i[0]||t[0]==i[0]&&t[1]>i[1]||t[0]==i[0]&&t[1]==i[1]&&t[2]>=i[2]?!0:!1}function b(e,t,i,n){if(!O.ie||!O.mac){var o=V.getElementsByTagName("head")[0];if(o){var a=i&&"string"==typeof i?i:"screen";if(n&&(C=null,M=null),!C||M!=a){var s=v("style");s.setAttribute("type","text/css"),s.setAttribute("media",a),C=o.appendChild(s),O.ie&&O.win&&typeof V.styleSheets!=F&&V.styleSheets.length>0&&(C=V.styleSheets[V.styleSheets.length-1]),M=a}O.ie&&O.win?C&&typeof C.addRule==P&&C.addRule(e,t):C&&typeof V.createTextNode!=F&&C.appendChild(V.createTextNode(e+" {"+t+"}"))}}}function w(e,t){if(X){var i=t?"visible":"hidden";q&&f(e)?f(e).style.visibility=i:b("#"+e,"visibility:"+i)}}function j(e){var t=/[\\\"<>\.;]/,i=null!=t.exec(e);return i&&typeof encodeURIComponent!=F?encodeURIComponent(e):e}var k,x,S,T,C,M,F="undefined",P="object",E="Shockwave Flash",A="ShockwaveFlash.ShockwaveFlash",$="application/x-shockwave-flash",I="SWFObjectExprInst",L="onreadystatechange",N=window,V=document,H=navigator,B=!1,W=[n],z=[],D=[],R=[],q=!1,Y=!1,X=!0,O=function(){var e=typeof V.getElementById!=F&&typeof V.getElementsByTagName!=F&&typeof V.createElement!=F,t=H.userAgent.toLowerCase(),i=H.platform.toLowerCase(),n=i?/win/.test(i):/win/.test(t),o=i?/mac/.test(i):/mac/.test(t),a=/webkit/.test(t)?parseFloat(t.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):!1,s=!1,r=[0,0,0],l=null;if(typeof H.plugins!=F&&typeof H.plugins[E]==P)l=H.plugins[E].description,!l||typeof H.mimeTypes!=F&&H.mimeTypes[$]&&!H.mimeTypes[$].enabledPlugin||(B=!0,s=!1,l=l.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),r[0]=parseInt(l.replace(/^(.*)\..*$/,"$1"),10),r[1]=parseInt(l.replace(/^.*\.(.*)\s.*$/,"$1"),10),r[2]=/[a-zA-Z]/.test(l)?parseInt(l.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0);else if(typeof N.ActiveXObject!=F)try{var u=new ActiveXObject(A);u&&(l=u.GetVariable("$version"),l&&(s=!0,l=l.split(" ")[1].split(","),r=[parseInt(l[0],10),parseInt(l[1],10),parseInt(l[2],10)]))}catch(d){}return{w3:e,pv:r,wk:a,ie:s,win:n,mac:o}}();return function(){O.w3&&((typeof V.readyState!=F&&"complete"==V.readyState||typeof V.readyState==F&&(V.getElementsByTagName("body")[0]||V.body))&&e(),q||(typeof V.addEventListener!=F&&V.addEventListener("DOMContentLoaded",e,!1),O.ie&&O.win&&(V.attachEvent(L,function(){"complete"==V.readyState&&(V.detachEvent(L,arguments.callee),e())}),N==top&&function(){if(!q){try{V.documentElement.doScroll("left")}catch(t){return setTimeout(arguments.callee,0),void 0}e()}}()),O.wk&&function(){return q?void 0:/loaded|complete/.test(V.readyState)?(e(),void 0):(setTimeout(arguments.callee,0),void 0)}(),i(e)))}(),function(){O.ie&&O.win&&window.attachEvent("onunload",function(){for(var e=R.length,t=0;e>t;t++)R[t][0].detachEvent(R[t][1],R[t][2]);for(var i=D.length,n=0;i>n;n++)h(D[n]);for(var o in O)O[o]=null;O=null;for(var a in swfobject)swfobject[a]=null;swfobject=null})}(),{registerObject:function(e,t,i,n){if(O.w3&&e&&t){var o={};o.id=e,o.swfVersion=t,o.expressInstall=i,o.callbackFn=n,z[z.length]=o,w(e,!1)}else n&&n({success:!1,id:e})},getObjectById:function(e){return O.w3?s(e):void 0},embedSWF:function(e,i,n,o,a,s,u,d,p,h){var m={success:!1,id:i};O.w3&&!(O.wk&&312>O.wk)&&e&&i&&n&&o&&a?(w(i,!1),t(function(){n+="",o+="";var t={};if(p&&typeof p===P)for(var f in p)t[f]=p[f];t.data=e,t.width=n,t.height=o;var v={};if(d&&typeof d===P)for(var g in d)v[g]=d[g];if(u&&typeof u===P)for(var b in u)typeof v.flashvars!=F?v.flashvars+="&"+b+"="+u[b]:v.flashvars=b+"="+u[b];if(y(a)){var j=c(t,v,i);t.id==i&&w(i,!0),m.success=!0,m.ref=j}else{if(s&&r())return t.data=s,l(t,v,i,h),void 0;w(i,!0)}h&&h(m)})):h&&h(m)},switchOffAutoHideShow:function(){X=!1},ua:O,getFlashPlayerVersion:function(){return{major:O.pv[0],minor:O.pv[1],release:O.pv[2]}},hasFlashPlayerVersion:y,createSWF:function(e,t,i){return O.w3?c(e,t,i):void 0},showExpressInstall:function(e,t,i,n){O.w3&&r()&&l(e,t,i,n)},removeSWF:function(e){O.w3&&h(e)},createCSS:function(e,t,i,n){O.w3&&b(e,t,i,n)},addDomLoadEvent:t,addLoadEvent:i,getQueryParamValue:function(e){var t=V.location.search||V.location.hash;if(t){if(/\?/.test(t)&&(t=t.split("?")[1]),null==e)return j(t);for(var i=t.split("&"),n=0;i.length>n;n++)if(i[n].substring(0,i[n].indexOf("="))==e)return j(i[n].substring(i[n].indexOf("=")+1))}return""},expressInstallCallback:function(){if(Y){var e=f(I);e&&k&&(e.parentNode.replaceChild(k,e),x&&(w(x,!0),O.ie&&O.win&&(k.style.display="block")),S&&S(T)),Y=!1}}}}(),mejs=mejs||{};mejs.version="2.9.5",mejs.meIndex=0,mejs.plugins={silverlight:[{version:[3,0],types:["video/mp4","video/m4v","video/mov","video/wmv","audio/wma","audio/m4a","audio/mp3","audio/wav","audio/mpeg"]}],flash:[{version:[9,0,124],types:["video/mp4","video/m4v","video/mov","video/flv","video/rtmp","video/x-flv","audio/flv","audio/x-flv","audio/mp3","audio/m4a","audio/mpeg","video/youtube","video/x-youtube"]}],youtube:[{version:null,types:["video/youtube","video/x-youtube"]}],vimeo:[{version:null,types:["video/vimeo"]}]},mejs.Utility={encodeUrl:function(e){return encodeURIComponent(e)},escapeHTML:function(e){return(""+e).split("&").join("&amp;").split("<").join("&lt;").split('"').join("&quot;")},absolutizeUrl:function(e){var t=document.createElement("div");return t.innerHTML='<a href="'+this.escapeHTML(e)+'">x</a>',t.firstChild.href},getScriptPath:function(e){for(var t,i,n=0,o="",a="",s=document.getElementsByTagName("script"),r=s.length,l=e.length;r>n;n++){for(i=s[n].src,t=0;l>t;t++)if(a=e[t],i.indexOf(a)>-1){o=i.substring(0,i.indexOf(a));break}if(""!==o)break}return o},secondsToTimeCode:function(e,t,i,n){i===void 0?i=!1:n===void 0&&(n=25);var o=Math.floor(e/3600)%24,a=Math.floor(e/60)%60,s=Math.floor(e%60);return e=Math.floor((e%1*n).toFixed(3)),(t||o>0?(10>o?"0"+o:o)+":":"")+(10>a?"0"+a:a)+":"+(10>s?"0"+s:s)+(i?":"+(10>e?"0"+e:e):"")},timeCodeToSeconds:function(e,t,i,n){i===void 0?i=!1:n===void 0&&(n=25),e=e.split(":"),t=parseInt(e[0],10);var o=parseInt(e[1],10),a=parseInt(e[2],10),s=0,r=0;return i&&(s=parseInt(e[3])/n),r=3600*t+60*o+a+s},convertSMPTEtoSeconds:function(e){if("string"!=typeof e)return!1;e=e.replace(",",".");var t=0,i=-1!=e.indexOf(".")?e.split(".")[1].length:0,n=1;e=e.split(":").reverse();for(var o=0;e.length>o;o++)n=1,o>0&&(n=Math.pow(60,o)),t+=Number(e[o])*n;return Number(t.toFixed(i))},removeSwf:function(e){var t=document.getElementById(e);t&&"OBJECT"==t.nodeName&&(mejs.MediaFeatures.isIE?(t.style.display="none",function(){4==t.readyState?mejs.Utility.removeObjectInIE(e):setTimeout(arguments.callee,10)}()):t.parentNode.removeChild(t))},removeObjectInIE:function(e){if(e=document.getElementById(e)){for(var t in e)"function"==typeof e[t]&&(e[t]=null);e.parentNode.removeChild(e)}}},mejs.PluginDetector={hasPluginVersion:function(e,t){var i=this.plugins[e];return t[1]=t[1]||0,t[2]=t[2]||0,i[0]>t[0]||i[0]==t[0]&&i[1]>t[1]||i[0]==t[0]&&i[1]==t[1]&&i[2]>=t[2]?!0:!1},nav:window.navigator,ua:window.navigator.userAgent.toLowerCase(),plugins:[],addPlugin:function(e,t,i,n,o){this.plugins[e]=this.detectPlugin(t,i,n,o)},detectPlugin:function(e,t,i,n){var o,a=[0,0,0];if(this.nav.plugins!==void 0&&"object"==typeof this.nav.plugins[e]){if((i=this.nav.plugins[e].description)&&(void 0===this.nav.mimeTypes||!this.nav.mimeTypes[t]||this.nav.mimeTypes[t].enabledPlugin))for(a=i.replace(e,"").replace(/^\s+/,"").replace(/\sr/gi,".").split("."),e=0;a.length>e;e++)a[e]=parseInt(a[e].match(/\d+/),10)}else if(window.ActiveXObject!==void 0)try{(o=new ActiveXObject(i))&&(a=n(o))}catch(s){}return a}},mejs.PluginDetector.addPlugin("flash","Shockwave Flash","application/x-shockwave-flash","ShockwaveFlash.ShockwaveFlash",function(e){var t=[];return(e=e.GetVariable("$version"))&&(e=e.split(" ")[1].split(","),t=[parseInt(e[0],10),parseInt(e[1],10),parseInt(e[2],10)]),t}),mejs.PluginDetector.addPlugin("silverlight","Silverlight Plug-In","application/x-silverlight-2","AgControl.AgControl",function(e){var t=[0,0,0,0],i=function(e,t,i,n){for(;e.isVersionSupported(t[0]+"."+t[1]+"."+t[2]+"."+t[3]);)t[i]+=n;t[i]-=n};return i(e,t,0,1),i(e,t,1,1),i(e,t,2,1e4),i(e,t,2,1e3),i(e,t,2,100),i(e,t,2,10),i(e,t,2,1),i(e,t,3,1),t}),mejs.MediaFeatures={init:function(){var e,t=this,i=document,n=mejs.PluginDetector.nav,o=mejs.PluginDetector.ua.toLowerCase(),a=["source","track","audio","video"];t.isiPad=null!==o.match(/ipad/i),t.isiPhone=null!==o.match(/iphone/i),t.isiOS=t.isiPhone||t.isiPad,t.isAndroid=null!==o.match(/android/i),t.isBustedAndroid=null!==o.match(/android 2\.[12]/),t.isIE=-1!=n.appName.toLowerCase().indexOf("microsoft"),t.isChrome=null!==o.match(/chrome/gi),t.isFirefox=null!==o.match(/firefox/gi),t.isWebkit=null!==o.match(/webkit/gi),t.isGecko=null!==o.match(/gecko/gi)&&!t.isWebkit,t.isOpera=null!==o.match(/opera/gi),t.hasTouch="ontouchstart"in window;for(n=0;a.length>n;n++)e=document.createElement(a[n]);t.supportsMediaTag=e.canPlayType!==void 0||t.isBustedAndroid,t.hasSemiNativeFullScreen=e.webkitEnterFullscreen!==void 0,t.hasWebkitNativeFullScreen=e.webkitRequestFullScreen!==void 0,t.hasMozNativeFullScreen=e.mozRequestFullScreen!==void 0,t.hasTrueNativeFullScreen=t.hasWebkitNativeFullScreen||t.hasMozNativeFullScreen,t.nativeFullScreenEnabled=t.hasTrueNativeFullScreen,t.hasMozNativeFullScreen&&(t.nativeFullScreenEnabled=e.mozFullScreenEnabled),this.isChrome&&(t.hasSemiNativeFullScreen=!1),t.hasTrueNativeFullScreen&&(t.fullScreenEventName=t.hasWebkitNativeFullScreen?"webkitfullscreenchange":"mozfullscreenchange",t.isFullScreen=function(){return e.mozRequestFullScreen?i.mozFullScreen:e.webkitRequestFullScreen?i.webkitIsFullScreen:void 0},t.requestFullScreen=function(e){t.hasWebkitNativeFullScreen?e.webkitRequestFullScreen():t.hasMozNativeFullScreen&&e.mozRequestFullScreen()},t.cancelFullScreen=function(){t.hasWebkitNativeFullScreen?document.webkitCancelFullScreen():t.hasMozNativeFullScreen&&document.mozCancelFullScreen()}),t.hasSemiNativeFullScreen&&o.match(/mac os x 10_5/i)&&(t.hasNativeFullScreen=!1,t.hasSemiNativeFullScreen=!1)}},mejs.MediaFeatures.init(),mejs.HtmlMediaElement={pluginType:"native",isFullScreen:!1,setCurrentTime:function(e){this.currentTime=e},setMuted:function(e){this.muted=e},setVolume:function(e){this.volume=e},stop:function(){this.pause()},setSrc:function(e){for(var t=this.getElementsByTagName("source");t.length>0;)this.removeChild(t[0]);if("string"==typeof e)this.src=e;else{var i;for(t=0;e.length>t;t++)i=e[t],this.canPlayType(i.type)&&(this.src=i.src)}},setVideoSize:function(e,t){this.width=e,this.height=t}},mejs.PluginMediaElement=function(e,t,i){this.id=e,this.pluginType=t,this.src=i,this.events={}},mejs.PluginMediaElement.prototype={pluginElement:null,pluginType:"",isFullScreen:!1,playbackRate:-1,defaultPlaybackRate:-1,seekable:[],played:[],paused:!0,ended:!1,seeking:!1,duration:0,error:null,tagName:"",muted:!1,volume:1,currentTime:0,play:function(){null!=this.pluginApi&&("youtube"==this.pluginType?this.pluginApi.playVideo():this.pluginApi.playMedia(),this.paused=!1)},load:function(){null!=this.pluginApi&&("youtube"!=this.pluginType&&this.pluginApi.loadMedia(),this.paused=!1)},pause:function(){null!=this.pluginApi&&("youtube"==this.pluginType?this.pluginApi.pauseVideo():this.pluginApi.pauseMedia(),this.paused=!0)},stop:function(){null!=this.pluginApi&&("youtube"==this.pluginType?this.pluginApi.stopVideo():this.pluginApi.stopMedia(),this.paused=!0)},canPlayType:function(e){var t,i,n,o=mejs.plugins[this.pluginType];for(t=0;o.length>t;t++)if(n=o[t],mejs.PluginDetector.hasPluginVersion(this.pluginType,n.version))for(i=0;n.types.length>i;i++)if(e==n.types[i])return!0;return!1},positionFullscreenButton:function(e,t,i){null!=this.pluginApi&&this.pluginApi.positionFullscreenButton&&this.pluginApi.positionFullscreenButton(e,t,i)},hideFullscreenButton:function(){null!=this.pluginApi&&this.pluginApi.hideFullscreenButton&&this.pluginApi.hideFullscreenButton()},setSrc:function(e){if("string"==typeof e)this.pluginApi.setSrc(mejs.Utility.absolutizeUrl(e)),this.src=mejs.Utility.absolutizeUrl(e);else{var t,i;for(t=0;e.length>t;t++)i=e[t],this.canPlayType(i.type)&&(this.pluginApi.setSrc(mejs.Utility.absolutizeUrl(i.src)),this.src=mejs.Utility.absolutizeUrl(e))}},setCurrentTime:function(e){null!=this.pluginApi&&("youtube"==this.pluginType?this.pluginApi.seekTo(e):this.pluginApi.setCurrentTime(e),this.currentTime=e)},setVolume:function(e){null!=this.pluginApi&&("youtube"==this.pluginType?this.pluginApi.setVolume(100*e):this.pluginApi.setVolume(e),this.volume=e)},setMuted:function(e){null!=this.pluginApi&&("youtube"==this.pluginType?(e?this.pluginApi.mute():this.pluginApi.unMute(),this.muted=e,this.dispatchEvent("volumechange")):this.pluginApi.setMuted(e),this.muted=e)},setVideoSize:function(e,t){this.pluginElement.style&&(this.pluginElement.style.width=e+"px",this.pluginElement.style.height=t+"px"),null!=this.pluginApi&&this.pluginApi.setVideoSize&&this.pluginApi.setVideoSize(e,t)},setFullscreen:function(e){null!=this.pluginApi&&this.pluginApi.setFullscreen&&this.pluginApi.setFullscreen(e)},enterFullScreen:function(){null!=this.pluginApi&&this.pluginApi.setFullscreen&&this.setFullscreen(!0)},exitFullScreen:function(){null!=this.pluginApi&&this.pluginApi.setFullscreen&&this.setFullscreen(!1)},addEventListener:function(e,t){this.events[e]=this.events[e]||[],this.events[e].push(t)},removeEventListener:function(e,t){if(!e)return this.events={},!0;var n=this.events[e];if(!n)return!0;if(!t)return this.events[e]=[],!0;for(i=0;n.length>i;i++)if(n[i]===t)return this.events[e].splice(i,1),!0;return!1},dispatchEvent:function(e){var t,i,n=this.events[e];if(n)for(i=Array.prototype.slice.call(arguments,1),t=0;n.length>t;t++)n[t].apply(null,i)},attributes:{},hasAttribute:function(e){return e in this.attributes},removeAttribute:function(e){delete this.attributes[e]},getAttribute:function(e){return this.hasAttribute(e)?this.attributes[e]:""},setAttribute:function(e,t){this.attributes[e]=t},remove:function(){mejs.Utility.removeSwf(this.pluginElement.id)}},mejs.MediaPluginBridge={pluginMediaElements:{},htmlMediaElements:{},registerPluginElement:function(e,t,i){this.pluginMediaElements[e]=t,this.htmlMediaElements[e]=i},initPlugin:function(e){var t=this.pluginMediaElements[e],i=this.htmlMediaElements[e];if(t){switch(t.pluginType){case"flash":t.pluginElement=t.pluginApi=document.getElementById(e);break;case"silverlight":t.pluginElement=document.getElementById(t.id),t.pluginApi=t.pluginElement.Content.MediaElementJS}null!=t.pluginApi&&t.success&&t.success(t,i)}},fireEvent:function(e,t,i){var n,o;e=this.pluginMediaElements[e],e.ended=!1,e.paused=!0,t={type:t,target:e};for(n in i)e[n]=i[n],t[n]=i[n];o=i.bufferedTime||0,t.target.buffered=t.buffered={start:function(){return 0},end:function(){return o},length:1},e.dispatchEvent(t.type,t)}},mejs.MediaElementDefaults={mode:"auto",plugins:["flash","silverlight","youtube","vimeo"],enablePluginDebug:!1,type:"",pluginPath:mejs.Utility.getScriptPath(["mediaelement.js","mediaelement.min.js","mediaelement-and-player.js","mediaelement-and-player.min.js"]),flashName:"flashmediaelement.swf",flashStreamer:"",enablePluginSmoothing:!1,silverlightName:"silverlightmediaelement.xap",defaultVideoWidth:480,defaultVideoHeight:270,pluginWidth:-1,pluginHeight:-1,pluginVars:[],timerRate:250,startVolume:.8,success:function(){},error:function(){}},mejs.MediaElement=function(e,t){return mejs.HtmlMediaElementShim.create(e,t)},mejs.HtmlMediaElementShim={create:function(e,t){var i=mejs.MediaElementDefaults,n="string"==typeof e?document.getElementById(e):e,o=n.tagName.toLowerCase(),a="audio"===o||"video"===o,s=a?n.getAttribute("src"):n.getAttribute("href");o=n.getAttribute("poster");var r,l=n.getAttribute("autoplay"),u=n.getAttribute("preload"),d=n.getAttribute("controls");for(r in t)i[r]=t[r];return s=s===void 0||null===s||""==s?null:s,o=o===void 0||null===o?"":o,u=u===void 0||null===u||"false"===u?"none":u,l=!(l===void 0||null===l||"false"===l),d=!(d===void 0||null===d||"false"===d),r=this.determinePlayback(n,i,mejs.MediaFeatures.supportsMediaTag,a,s),r.url=null!==r.url?mejs.Utility.absolutizeUrl(r.url):"","native"==r.method?(mejs.MediaFeatures.isBustedAndroid&&(n.src=r.url,n.addEventListener("click",function(){n.play()},!1)),this.updateNative(r,i,l,u)):""!==r.method?this.createPlugin(r,i,o,l,u,d):(this.createErrorMessage(r,i,o),this)},determinePlayback:function(e,t,i,n,o){var a,s,r,l,u=[],d={method:"",url:"",htmlMediaElement:e,isVideo:"audio"!=e.tagName.toLowerCase()};if(t.type!==void 0&&""!==t.type)if("string"==typeof t.type)u.push({type:t.type,url:o});else for(a=0;t.type.length>a;a++)u.push({type:t.type[a],url:o});else if(null!==o)s=this.formatType(o,e.getAttribute("type")),u.push({type:s,url:o});else for(a=0;e.childNodes.length>a;a++)s=e.childNodes[a],1==s.nodeType&&"source"==s.tagName.toLowerCase()&&(o=s.getAttribute("src"),s=this.formatType(o,s.getAttribute("type")),u.push({type:s,url:o}));if(!n&&u.length>0&&null!==u[0].url&&this.getTypeFromFile(u[0].url).indexOf("audio")>-1&&(d.isVideo=!1),mejs.MediaFeatures.isBustedAndroid&&(e.canPlayType=function(e){return null!==e.match(/video\/(mp4|m4v)/gi)?"maybe":""}),i&&("auto"===t.mode||"auto_plugin"===t.mode||"native"===t.mode)){for(n||(a=document.createElement(d.isVideo?"video":"audio"),e.parentNode.insertBefore(a,e),e.style.display="none",d.htmlMediaElement=e=a),a=0;u.length>a;a++)if(""!==e.canPlayType(u[a].type).replace(/no/,"")||""!==e.canPlayType(u[a].type.replace(/mp3/,"mpeg")).replace(/no/,"")){d.method="native",d.url=u[a].url;break}if("native"===d.method&&(null!==d.url&&(e.src=d.url),"auto_plugin"!==t.mode))return d}if("auto"===t.mode||"auto_plugin"===t.mode||"shim"===t.mode)for(a=0;u.length>a;a++)for(s=u[a].type,e=0;t.plugins.length>e;e++)for(o=t.plugins[e],r=mejs.plugins[o],i=0;r.length>i;i++)if(l=r[i],null==l.version||mejs.PluginDetector.hasPluginVersion(o,l.version))for(n=0;l.types.length>n;n++)if(s==l.types[n])return d.method=o,d.url=u[a].url,d;return"auto_plugin"===t.mode&&"native"===d.method?d:(""===d.method&&u.length>0&&(d.url=u[0].url),d)},formatType:function(e,t){return e&&!t?this.getTypeFromFile(e):t&&~t.indexOf(";")?t.substr(0,t.indexOf(";")):t},getTypeFromFile:function(e){return e=e.substring(e.lastIndexOf(".")+1),(/(mp4|m4v|ogg|ogv|webm|webmv|flv|wmv|mpeg|mov)/gi.test(e)?"video":"audio")+"/"+this.getTypeFromExtension(e)},getTypeFromExtension:function(e){switch(e){case"mp4":case"m4v":return"mp4";case"webm":case"webma":case"webmv":return"webm";case"ogg":case"oga":case"ogv":return"ogg";default:return e}},createErrorMessage:function(e,t,i){var n=e.htmlMediaElement,o=document.createElement("div");o.className="me-cannotplay";try{o.style.width=n.width+"px",o.style.height=n.height+"px"}catch(a){}o.innerHTML=""!==i?'<a href="'+e.url+'"><img src="'+i+'" width="100%" height="100%" /></a>':'<a href="'+e.url+'"><span>Download File</span></a>',n.parentNode.insertBefore(o,n),n.style.display="none",t.error(n)},createPlugin:function(e,t,i,n,o,a){i=e.htmlMediaElement;var s,r=1,l=1,u="me_"+e.method+"_"+mejs.meIndex++,d=new mejs.PluginMediaElement(u,e.method,e.url),c=document.createElement("div");for(d.tagName=i.tagName,s=0;i.attributes.length>s;s++){var p=i.attributes[s];1==p.specified&&d.setAttribute(p.name,p.value)}for(s=i.parentNode;null!==s&&"body"!=s.tagName.toLowerCase();){if("p"==s.parentNode.tagName.toLowerCase()){s.parentNode.parentNode.insertBefore(s,s.parentNode);break}s=s.parentNode}switch(e.isVideo?(r=t.videoWidth>0?t.videoWidth:null!==i.getAttribute("width")?i.getAttribute("width"):t.defaultVideoWidth,l=t.videoHeight>0?t.videoHeight:null!==i.getAttribute("height")?i.getAttribute("height"):t.defaultVideoHeight,r=mejs.Utility.encodeUrl(r),l=mejs.Utility.encodeUrl(l)):t.enablePluginDebug&&(r=320,l=240),d.success=t.success,mejs.MediaPluginBridge.registerPluginElement(u,d,i),c.className="me-plugin",c.id=u+"_container",e.isVideo?i.parentNode.insertBefore(c,i):document.body.insertBefore(c,document.body.childNodes[0]),n=["id="+u,"isvideo="+(e.isVideo?"true":"false"),"autoplay="+(n?"true":"false"),"preload="+o,"width="+r,"startvolume="+t.startVolume,"timerrate="+t.timerRate,"flashstreamer="+t.flashStreamer,"height="+l],null!==e.url&&("flash"==e.method?n.push("file="+mejs.Utility.encodeUrl(e.url)):n.push("file="+e.url)),t.enablePluginDebug&&n.push("debug=true"),t.enablePluginSmoothing&&n.push("smoothing=true"),a&&n.push("controls=true"),t.pluginVars&&(n=n.concat(t.pluginVars)),e.method){case"silverlight":c.innerHTML='<object data="data:application/x-silverlight-2," type="application/x-silverlight-2" id="'+u+'" name="'+u+'" width="'+r+'" height="'+l+'"><param name="initParams" value="'+n.join(",")+'" /><param name="windowless" value="true" /><param name="background" value="black" /><param name="minRuntimeVersion" value="3.0.0.0" /><param name="autoUpgrade" value="true" /><param name="source" value="'+t.pluginPath+t.silverlightName+'" /></object>';break;case"flash":mejs.MediaFeatures.isIE?(e=document.createElement("div"),c.appendChild(e),e.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="//download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab" id="'+u+'" width="'+r+'" height="'+l+'"><param name="movie" value="'+t.pluginPath+t.flashName+"?x="+new Date+'" /><param name="flashvars" value="'+n.join("&amp;")+'" /><param name="quality" value="high" /><param name="bgcolor" value="#000000" /><param name="wmode" value="transparent" /><param name="allowScriptAccess" value="always" /><param name="allowFullScreen" value="true" /></object>'):c.innerHTML='<embed id="'+u+'" name="'+u+'" play="true" loop="false" quality="high" bgcolor="#000000" wmode="transparent" allowScriptAccess="always" allowFullScreen="true" type="application/x-shockwave-flash" pluginspage="//www.macromedia.com/go/getflashplayer" src="'+t.pluginPath+t.flashName+'" flashvars="'+n.join("&")+'" width="'+r+'" height="'+l+'"></embed>';break;case"youtube":t=e.url.substr(e.url.lastIndexOf("=")+1),youtubeSettings={container:c,containerId:c.id,pluginMediaElement:d,pluginId:u,videoId:t,height:l,width:r},mejs.PluginDetector.hasPluginVersion("flash",[10,0,0])?mejs.YouTubeApi.createFlash(youtubeSettings):mejs.YouTubeApi.enqueueIframe(youtubeSettings);break;case"vimeo":d.vimeoid=e.url.substr(e.url.lastIndexOf("/")+1),c.innerHTML='<object width="'+r+'" height="'+l+'"><param name="allowfullscreen" value="true" /><param name="allowscriptaccess" value="always" /><param name="flashvars" value="api=1" /><param name="movie" value="http://vimeo.com/moogaloop.swf?clip_id='+d.vimeoid+'&amp;server=vimeo.com&amp;show_title=0&amp;show_byline=0&amp;show_portrait=0&amp;color=00adef&amp;fullscreen=1&amp;autoplay=0&amp;loop=0" /><embed src="//vimeo.com/moogaloop.swf?api=1&amp;clip_id='+d.vimeoid+'&amp;server=vimeo.com&amp;show_title=0&amp;show_byline=0&amp;show_portrait=0&amp;color=00adef&amp;fullscreen=1&amp;autoplay=0&amp;loop=0" type="application/x-shockwave-flash" allowfullscreen="true" allowscriptaccess="always" width="'+r+'" height="'+l+'"></embed></object>'}return i.style.display="none",d},updateNative:function(e,t){var i,n=e.htmlMediaElement;for(i in mejs.HtmlMediaElement)n[i]=mejs.HtmlMediaElement[i];return t.success(n,n),n}},mejs.YouTubeApi={isIframeStarted:!1,isIframeLoaded:!1,loadIframeApi:function(){if(!this.isIframeStarted){var e=document.createElement("script");e.src="http://www.youtube.com/player_api";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t),this.isIframeStarted=!0}},iframeQueue:[],enqueueIframe:function(e){this.isLoaded?this.createIframe(e):(this.loadIframeApi(),this.iframeQueue.push(e))},createIframe:function(e){var t=e.pluginMediaElement,i=new YT.Player(e.containerId,{height:e.height,width:e.width,videoId:e.videoId,playerVars:{controls:0},events:{onReady:function(){e.pluginMediaElement.pluginApi=i,mejs.MediaPluginBridge.initPlugin(e.pluginId),setInterval(function(){mejs.YouTubeApi.createEvent(i,t,"timeupdate")},250)},onStateChange:function(e){mejs.YouTubeApi.handleStateChange(e.data,i,t)}}})},createEvent:function(e,t,i){if(i={type:i,target:t},e&&e.getDuration){t.currentTime=i.currentTime=e.getCurrentTime(),t.duration=i.duration=e.getDuration(),i.paused=t.paused,i.ended=t.ended,i.muted=e.isMuted(),i.volume=e.getVolume()/100,i.bytesTotal=e.getVideoBytesTotal(),i.bufferedBytes=e.getVideoBytesLoaded();var n=i.bufferedBytes/i.bytesTotal*i.duration;i.target.buffered=i.buffered={start:function(){return 0},end:function(){return n},length:1}}t.dispatchEvent(i.type,i)},iFrameReady:function(){for(this.isIframeLoaded=this.isLoaded=!0;this.iframeQueue.length>0;)this.createIframe(this.iframeQueue.pop())},flashPlayers:{},createFlash:function(e){this.flashPlayers[e.pluginId]=e;var t,i="http://www.youtube.com/apiplayer?enablejsapi=1&amp;playerapiid="+e.pluginId+"&amp;version=3&amp;autoplay=0&amp;controls=0&amp;modestbranding=1&loop=0";mejs.MediaFeatures.isIE?(t=document.createElement("div"),e.container.appendChild(t),t.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="//download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab" id="'+e.pluginId+'" width="'+e.width+'" height="'+e.height+'"><param name="movie" value="'+i+'" /><param name="wmode" value="transparent" /><param name="allowScriptAccess" value="always" /><param name="allowFullScreen" value="true" /></object>'):e.container.innerHTML='<object type="application/x-shockwave-flash" id="'+e.pluginId+'" data="'+i+'" width="'+e.width+'" height="'+e.height+'" style="visibility: visible; "><param name="allowScriptAccess" value="always"><param name="wmode" value="transparent"></object>'
},flashReady:function(e){var t=this.flashPlayers[e],i=document.getElementById(e),n=t.pluginMediaElement;n.pluginApi=n.pluginElement=i,mejs.MediaPluginBridge.initPlugin(e),i.cueVideoById(t.videoId),e=t.containerId+"_callback",window[e]=function(e){mejs.YouTubeApi.handleStateChange(e,i,n)},i.addEventListener("onStateChange",e),setInterval(function(){mejs.YouTubeApi.createEvent(i,n,"timeupdate")},250)},handleStateChange:function(e,t,i){switch(e){case-1:i.paused=!0,i.ended=!0,mejs.YouTubeApi.createEvent(t,i,"loadedmetadata");break;case 0:i.paused=!1,i.ended=!0,mejs.YouTubeApi.createEvent(t,i,"ended");break;case 1:i.paused=!1,i.ended=!1,mejs.YouTubeApi.createEvent(t,i,"play"),mejs.YouTubeApi.createEvent(t,i,"playing");break;case 2:i.paused=!0,i.ended=!1,mejs.YouTubeApi.createEvent(t,i,"pause");break;case 3:mejs.YouTubeApi.createEvent(t,i,"progress")}}},window.mejs=mejs,window.MediaElement=mejs.MediaElement,"undefined"!=typeof jQuery?mejs.$=jQuery:"undefined"!=typeof ender&&(mejs.$=ender),function(e){mejs.MepDefaults={poster:"",defaultVideoWidth:480,defaultVideoHeight:270,videoWidth:-1,videoHeight:-1,defaultAudioWidth:400,defaultAudioHeight:30,defaultSeekBackwardInterval:function(e){return.05*e.duration},defaultSeekForwardInterval:function(e){return.05*e.duration},audioWidth:-1,audioHeight:-1,startVolume:.8,loop:!1,enableAutosize:!0,alwaysShowHours:!1,showTimecodeFrameCount:!1,framesPerSecond:25,autosizeProgress:!0,alwaysShowControls:!1,iPadUseNativeControls:!1,iPhoneUseNativeControls:!1,AndroidUseNativeControls:!1,features:["playpause","current","progress","duration","tracks","volume","fullscreen"],isVideo:!0,enableKeyboard:!0,pauseOtherPlayers:!0,keyActions:[{keys:[32,179],action:function(e,t){t.paused||t.ended?t.play():t.pause()}},{keys:[38],action:function(e,t){t.setVolume(Math.min(t.volume+.1,1))}},{keys:[40],action:function(e,t){t.setVolume(Math.max(t.volume-.1,0))}},{keys:[37,227],action:function(e,t){if(!isNaN(t.duration)&&t.duration>0){e.isVideo&&(e.showControls(),e.startControlsTimer());var i=Math.max(t.currentTime-e.options.defaultSeekBackwardInterval(t),0);t.setCurrentTime(i)}}},{keys:[39,228],action:function(e,t){if(!isNaN(t.duration)&&t.duration>0){e.isVideo&&(e.showControls(),e.startControlsTimer());var i=Math.min(t.currentTime+e.options.defaultSeekForwardInterval(t),t.duration);t.setCurrentTime(i)}}},{keys:[70],action:function(e){e.enterFullScreen!==void 0&&(e.isFullScreen?e.exitFullScreen():e.enterFullScreen())}}]},mejs.mepIndex=0,mejs.players=[],mejs.MediaElementPlayer=function(t,i){return this instanceof mejs.MediaElementPlayer?(this.$media=this.$node=e(t),this.node=this.media=this.$media[0],this.node.player!==void 0?this.node.player:(this.node.player=this,i===void 0&&(i=this.$node.data("mejsoptions")),this.options=e.extend({},mejs.MepDefaults,i),mejs.players.push(this),this.init(),this)):new mejs.MediaElementPlayer(t,i)},mejs.MediaElementPlayer.prototype={hasFocus:!1,controlsAreVisible:!0,init:function(){var t=this,i=mejs.MediaFeatures,n=e.extend(!0,{},t.options,{success:function(e,i){t.meReady(e,i)},error:function(e){t.handleError(e)}}),o=t.media.tagName.toLowerCase();t.isDynamic="audio"!==o&&"video"!==o,t.isVideo=t.isDynamic?t.options.isVideo:"audio"!==o&&t.options.isVideo,i.isiPad&&t.options.iPadUseNativeControls||i.isiPhone&&t.options.iPhoneUseNativeControls?(t.$media.attr("controls","controls"),i.isiPad&&null!==t.media.getAttribute("autoplay")&&(t.media.load(),t.media.play())):i.isAndroid&&t.AndroidUseNativeControls||(t.$media.removeAttr("controls"),t.id="mep_"+mejs.mepIndex++,t.container=e('<div id="'+t.id+'" class="mejs-container"><div class="mejs-inner"><div class="mejs-mediaelement"></div><div class="mejs-layers"></div><div class="mejs-controls"></div><div class="mejs-clear"></div></div></div>').addClass(t.$media[0].className).insertBefore(t.$media),t.container.addClass((i.isAndroid?"mejs-android ":"")+(i.isiOS?"mejs-ios ":"")+(i.isiPad?"mejs-ipad ":"")+(i.isiPhone?"mejs-iphone ":"")+(t.isVideo?"mejs-video ":"mejs-audio ")),i.isiOS?(i=t.$media.clone(),t.container.find(".mejs-mediaelement").append(i),t.$media.remove(),t.$node=t.$media=i,t.node=t.media=i[0]):t.container.find(".mejs-mediaelement").append(t.$media),t.controls=t.container.find(".mejs-controls"),t.layers=t.container.find(".mejs-layers"),i=t.isVideo?"video":"audio",o=i.substring(0,1).toUpperCase()+i.substring(1),t.width=t.options[i+"Width"]>0||(""+t.options[i+"Width"]).indexOf("%")>-1?t.options[i+"Width"]:""!==t.media.style.width&&null!==t.media.style.width?t.media.style.width:null!==t.media.getAttribute("width")?t.$media.attr("width"):t.options["default"+o+"Width"],t.height=t.options[i+"Height"]>0||(""+t.options[i+"Height"]).indexOf("%")>-1?t.options[i+"Height"]:""!==t.media.style.height&&null!==t.media.style.height?t.media.style.height:null!==t.$media[0].getAttribute("height")?t.$media.attr("height"):t.options["default"+o+"Height"],t.setPlayerSize(t.width,t.height),n.pluginWidth=t.height,n.pluginHeight=t.width),mejs.MediaElement(t.$media[0],n)},showControls:function(e){var t=this;e=e===void 0||e,t.controlsAreVisible||(e?(t.controls.css("visibility","visible").stop(!0,!0).fadeIn(200,function(){t.controlsAreVisible=!0}),t.container.find(".mejs-control").css("visibility","visible").stop(!0,!0).fadeIn(200,function(){t.controlsAreVisible=!0})):(t.controls.css("visibility","visible").css("display","block"),t.container.find(".mejs-control").css("visibility","visible").css("display","block"),t.controlsAreVisible=!0),t.setControlsSize())},hideControls:function(t){var i=this;t=t===void 0||t,i.controlsAreVisible&&(t?(i.controls.stop(!0,!0).fadeOut(200,function(){e(this).css("visibility","hidden").css("display","block"),i.controlsAreVisible=!1}),i.container.find(".mejs-control").stop(!0,!0).fadeOut(200,function(){e(this).css("visibility","hidden").css("display","block")})):(i.controls.css("visibility","hidden").css("display","block"),i.container.find(".mejs-control").css("visibility","hidden").css("display","block"),i.controlsAreVisible=!1))},controlsTimer:null,startControlsTimer:function(e){var t=this;e=e!==void 0?e:1500,t.killControlsTimer("start"),t.controlsTimer=setTimeout(function(){t.hideControls(),t.killControlsTimer("hide")},e)},killControlsTimer:function(){null!==this.controlsTimer&&(clearTimeout(this.controlsTimer),delete this.controlsTimer,this.controlsTimer=null)},controlsEnabled:!0,disableControls:function(){this.killControlsTimer(),this.hideControls(!1),this.controlsEnabled=!1},enableControls:function(){this.showControls(!1),this.controlsEnabled=!0},meReady:function(t,i){var n=this,o=mejs.MediaFeatures,a=i.getAttribute("autoplay");a=!(a===void 0||null===a||"false"===a);var s;if(!n.created){if(n.created=!0,n.media=t,n.domNode=i,!(o.isAndroid&&n.options.AndroidUseNativeControls||o.isiPad&&n.options.iPadUseNativeControls||o.isiPhone&&n.options.iPhoneUseNativeControls)){n.buildposter(n,n.controls,n.layers,n.media),n.buildkeyboard(n,n.controls,n.layers,n.media),n.buildoverlays(n,n.controls,n.layers,n.media),n.findTracks();for(s in n.options.features)if(o=n.options.features[s],n["build"+o])try{n["build"+o](n,n.controls,n.layers,n.media)}catch(r){}n.container.trigger("controlsready"),n.setPlayerSize(n.width,n.height),n.setControlsSize(),n.isVideo&&(mejs.MediaFeatures.hasTouch?n.$media.bind("touchstart",function(){n.controlsAreVisible?n.hideControls(!1):n.controlsEnabled&&n.showControls(!1)}):(("native"==n.media.pluginType?n.$media:e(n.media.pluginElement)).click(function(){t.paused?t.play():t.pause()}),n.container.bind("mouseenter mouseover",function(){n.controlsEnabled&&(n.options.alwaysShowControls||(n.killControlsTimer("enter"),n.showControls(),n.startControlsTimer(2500)))}).bind("mousemove",function(){n.controlsEnabled&&(n.controlsAreVisible||n.showControls(),n.options.alwaysShowControls||n.startControlsTimer(2500))}).bind("mouseleave",function(){n.controlsEnabled&&!n.media.paused&&!n.options.alwaysShowControls&&n.startControlsTimer(1e3)})),a&&!n.options.alwaysShowControls&&n.hideControls(),n.options.enableAutosize&&n.media.addEventListener("loadedmetadata",function(e){0>=n.options.videoHeight&&null===n.domNode.getAttribute("height")&&!isNaN(e.target.videoHeight)&&(n.setPlayerSize(e.target.videoWidth,e.target.videoHeight),n.setControlsSize(),n.media.setVideoSize(e.target.videoWidth,e.target.videoHeight))},!1)),t.addEventListener("play",function(){for(var e=0,t=mejs.players.length;t>e;e++){var i=mejs.players[e];i.id!=n.id&&n.options.pauseOtherPlayers&&!i.paused&&!i.ended&&i.pause(),i.hasFocus=!1}n.hasFocus=!0},!1),n.media.addEventListener("ended",function(){try{n.media.setCurrentTime(0)}catch(e){}n.media.pause(),n.setProgressRail&&n.setProgressRail(),n.setCurrentRail&&n.setCurrentRail(),n.options.loop?n.media.play():!n.options.alwaysShowControls&&n.controlsEnabled&&n.showControls()},!1),n.media.addEventListener("loadedmetadata",function(){n.updateDuration&&n.updateDuration(),n.updateCurrent&&n.updateCurrent(),n.isFullScreen||(n.setPlayerSize(n.width,n.height),n.setControlsSize())},!1),setTimeout(function(){n.setPlayerSize(n.width,n.height),n.setControlsSize()},50),e(window).resize(function(){n.isFullScreen||mejs.MediaFeatures.hasTrueNativeFullScreen&&document.webkitIsFullScreen||n.setPlayerSize(n.width,n.height),n.setControlsSize()}),"youtube"==n.media.pluginType&&n.container.find(".mejs-overlay-play").hide()}a&&"native"==t.pluginType&&(t.load(),t.play()),n.options.success&&("string"==typeof n.options.success?window[n.options.success](n.media,n.domNode,n):n.options.success(n.media,n.domNode,n))}},handleError:function(e){this.controls.hide(),this.options.error&&this.options.error(e)},setPlayerSize:function(t,i){if(t!==void 0&&(this.width=t),i!==void 0&&(this.height=i),(""+this.height).indexOf("%")>0||"100%"===this.$node.css("max-width")){var n=this.media.videoWidth&&this.media.videoWidth>0?this.media.videoWidth:this.options.defaultVideoWidth,o=this.media.videoHeight&&this.media.videoHeight>0?this.media.videoHeight:this.options.defaultVideoHeight,a=this.container.parent().width();n=parseInt(a*o/n,10),"body"===this.container.parent()[0].tagName.toLowerCase()&&(a=e(window).width(),n=e(window).height()),0!=n&&(this.container.width(a).height(n),this.$media.width("100%").height("100%"),this.container.find("object, embed, iframe").width("100%").height("100%"),this.isVideo&&this.media.setVideoSize&&this.media.setVideoSize(a,n),this.layers.children(".mejs-layer").width("100%").height("100%"))}else this.container.width(this.width).height(this.height),this.layers.children(".mejs-layer").width(this.width).height(this.height)},setControlsSize:function(){var t=0,i=0,n=this.controls.find(".mejs-time-rail"),o=this.controls.find(".mejs-time-total");this.controls.find(".mejs-time-current"),this.controls.find(".mejs-time-loaded");var a=n.siblings();this.options&&!this.options.autosizeProgress&&(i=parseInt(n.css("width"))),0!==i&&i||(a.each(function(){"absolute"!=e(this).css("position")&&(t+=e(this).outerWidth(!0))}),i=this.controls.width()-t-(n.outerWidth(!0)-n.width())),n.width(i),o.width(i-(o.outerWidth(!0)-o.width())),this.setProgressRail&&this.setProgressRail(),this.setCurrentRail&&this.setCurrentRail()},buildposter:function(t,i,n,o){var a=e('<div class="mejs-poster mejs-layer"></div>').appendTo(n);i=t.$media.attr("poster"),""!==t.options.poster&&(i=t.options.poster),""!==i&&null!=i?this.setPoster(i):a.hide(),o.addEventListener("play",function(){a.hide()},!1)},setPoster:function(t){var i=this.container.find(".mejs-poster"),n=i.find("img");0==n.length&&(n=e('<img width="100%" height="100%" />').appendTo(i)),n.attr("src",t)},buildoverlays:function(t,i,n,o){if(t.isVideo){var a=e('<div class="mejs-overlay mejs-layer"><div class="mejs-overlay-loading"><span></span></div></div>').hide().appendTo(n),s=e('<div class="mejs-overlay mejs-layer"><div class="mejs-overlay-error"></div></div>').hide().appendTo(n),r=e('<div class="mejs-overlay mejs-layer mejs-overlay-play"><div class="mejs-overlay-button"></div></div>').appendTo(n).click(function(){o.paused?o.play():o.pause()});o.addEventListener("play",function(){r.hide(),a.hide(),i.find(".mejs-time-buffering").hide(),s.hide()},!1),o.addEventListener("playing",function(){r.hide(),a.hide(),i.find(".mejs-time-buffering").hide(),s.hide()},!1),o.addEventListener("seeking",function(){a.show(),i.find(".mejs-time-buffering").show()},!1),o.addEventListener("seeked",function(){a.hide(),i.find(".mejs-time-buffering").hide()},!1),o.addEventListener("pause",function(){mejs.MediaFeatures.isiPhone||r.show()},!1),o.addEventListener("waiting",function(){a.show(),i.find(".mejs-time-buffering").show()},!1),o.addEventListener("loadeddata",function(){a.show(),i.find(".mejs-time-buffering").show()},!1),o.addEventListener("canplay",function(){a.hide(),i.find(".mejs-time-buffering").hide()},!1),o.addEventListener("error",function(){a.hide(),i.find(".mejs-time-buffering").hide(),s.show(),s.find("mejs-overlay-error").html("Error loading this resource")},!1)}},buildkeyboard:function(t,i,n,o){e(document).keydown(function(e){if(t.hasFocus&&t.options.enableKeyboard)for(var i=0,n=t.options.keyActions.length;n>i;i++)for(var a=t.options.keyActions[i],s=0,r=a.keys.length;r>s;s++)if(e.keyCode==a.keys[s])return e.preventDefault(),a.action(t,o,e.keyCode),!1;return!0}),e(document).click(function(i){0==e(i.target).closest(".mejs-container").length&&(t.hasFocus=!1)})},findTracks:function(){var t=this,i=t.$media.find("track");t.tracks=[],i.each(function(i,n){n=e(n),t.tracks.push({srclang:n.attr("srclang").toLowerCase(),src:n.attr("src"),kind:n.attr("kind"),label:n.attr("label")||"",entries:[],isLoaded:!1})})},changeSkin:function(e){this.container[0].className="mejs-container "+e,this.setPlayerSize(this.width,this.height),this.setControlsSize()},play:function(){this.media.play()},pause:function(){this.media.pause()},load:function(){this.media.load()},setMuted:function(e){this.media.setMuted(e)},setCurrentTime:function(e){this.media.setCurrentTime(e)},getCurrentTime:function(){return this.media.currentTime},setVolume:function(e){this.media.setVolume(e)},getVolume:function(){return this.media.volume},setSrc:function(e){this.media.setSrc(e)},remove:function(){"flash"===this.media.pluginType?this.media.remove():"native"===this.media.pluginType&&this.$media.prop("controls",!0),this.isDynamic||this.$node.insertBefore(this.container),this.container.remove()}},"undefined"!=typeof jQuery&&(jQuery.fn.mediaelementplayer=function(e){return this.each(function(){new mejs.MediaElementPlayer(this,e)})}),e(document).ready(function(){e(".mejs-player").mediaelementplayer()}),window.MediaElementPlayer=mejs.MediaElementPlayer}(mejs.$),function(e){e.extend(mejs.MepDefaults,{playpauseText:"Play/Pause"}),e.extend(MediaElementPlayer.prototype,{buildplaypause:function(t,i,n,o){var a=e('<div class="mejs-button mejs-playpause-button mejs-play" ><button type="button" aria-controls="'+this.id+'" title="'+this.options.playpauseText+'"></button></div>').appendTo(i).click(function(e){return e.preventDefault(),o.paused?o.play():o.pause(),!1});o.addEventListener("play",function(){a.removeClass("mejs-play").addClass("mejs-pause")},!1),o.addEventListener("playing",function(){a.removeClass("mejs-play").addClass("mejs-pause")},!1),o.addEventListener("pause",function(){a.removeClass("mejs-pause").addClass("mejs-play")},!1),o.addEventListener("paused",function(){a.removeClass("mejs-pause").addClass("mejs-play")},!1)}})}(mejs.$),function(e){e.extend(mejs.MepDefaults,{stopText:"Stop"}),e.extend(MediaElementPlayer.prototype,{buildstop:function(t,i,n,o){e('<div class="mejs-button mejs-stop-button mejs-stop"><button type="button" aria-controls="'+this.id+'" title="'+this.options.stopText+'"></button></div>').appendTo(i).click(function(){o.paused||o.pause(),o.currentTime>0&&(o.setCurrentTime(0),i.find(".mejs-time-current").width("0px"),i.find(".mejs-time-handle").css("left","0px"),i.find(".mejs-time-float-current").html(mejs.Utility.secondsToTimeCode(0)),i.find(".mejs-currenttime").html(mejs.Utility.secondsToTimeCode(0)),n.find(".mejs-poster").show())})}})}(mejs.$),function(e){e.extend(MediaElementPlayer.prototype,{buildprogress:function(t,i,n,o){e('<div class="mejs-time-rail"><span class="mejs-time-total"><span class="mejs-time-buffering"></span><span class="mejs-time-loaded"></span><span class="mejs-time-current"></span><span class="mejs-time-handle"></span><span class="mejs-time-float"><span class="mejs-time-float-current">00:00</span><span class="mejs-time-float-corner"></span></span></span></div>').appendTo(i),i.find(".mejs-time-buffering").hide();var a=i.find(".mejs-time-total");n=i.find(".mejs-time-loaded");var s=i.find(".mejs-time-current"),r=i.find(".mejs-time-handle"),l=i.find(".mejs-time-float"),u=i.find(".mejs-time-float-current"),d=function(e){e=e.pageX;var t=a.offset(),i=a.outerWidth(),n=0;n=0;var s=e-t.left;e>t.left&&i+t.left>=e&&o.duration&&(n=(e-t.left)/i,n=.02>=n?0:n*o.duration,c&&o.setCurrentTime(n),mejs.MediaFeatures.hasTouch||(l.css("left",s),u.html(mejs.Utility.secondsToTimeCode(n)),l.show()))},c=!1;a.bind("mousedown",function(t){return 1===t.which?(c=!0,d(t),e(document).bind("mousemove.dur",function(e){d(e)}).bind("mouseup.dur",function(){c=!1,l.hide(),e(document).unbind(".dur")}),!1):void 0}).bind("mouseenter",function(){e(document).bind("mousemove.dur",function(e){d(e)}),mejs.MediaFeatures.hasTouch||l.show()}).bind("mouseleave",function(){c||(e(document).unbind(".dur"),l.hide())}),o.addEventListener("progress",function(e){t.setProgressRail(e),t.setCurrentRail(e)},!1),o.addEventListener("timeupdate",function(e){t.setProgressRail(e),t.setCurrentRail(e)},!1),this.loaded=n,this.total=a,this.current=s,this.handle=r},setProgressRail:function(e){var t=void 0!=e?e.target:this.media,i=null;t&&t.buffered&&t.buffered.length>0&&t.buffered.end&&t.duration?i=t.buffered.end(0)/t.duration:t&&void 0!=t.bytesTotal&&t.bytesTotal>0&&void 0!=t.bufferedBytes?i=t.bufferedBytes/t.bytesTotal:e&&e.lengthComputable&&0!=e.total&&(i=e.loaded/e.total),null!==i&&(i=Math.min(1,Math.max(0,i)),this.loaded&&this.total&&this.loaded.width(this.total.width()*i))},setCurrentRail:function(){if(void 0!=this.media.currentTime&&this.media.duration&&this.total&&this.handle){var e=this.total.width()*this.media.currentTime/this.media.duration,t=e-this.handle.outerWidth(!0)/2;this.current.width(e),this.handle.css("left",t)}}})}(mejs.$),function(e){e.extend(mejs.MepDefaults,{duration:-1,timeAndDurationSeparator:" <span> | </span> "}),e.extend(MediaElementPlayer.prototype,{buildcurrent:function(t,i,n,o){e('<div class="mejs-time"><span class="mejs-currenttime">'+(t.options.alwaysShowHours?"00:":"")+(t.options.showTimecodeFrameCount?"00:00:00":"00:00")+"</span></div>").appendTo(i),this.currenttime=this.controls.find(".mejs-currenttime"),o.addEventListener("timeupdate",function(){t.updateCurrent()},!1)},buildduration:function(t,i,n,o){i.children().last().find(".mejs-currenttime").length>0?e(this.options.timeAndDurationSeparator+'<span class="mejs-duration">'+(this.options.duration>0?mejs.Utility.secondsToTimeCode(this.options.duration,this.options.alwaysShowHours||this.media.duration>3600,this.options.showTimecodeFrameCount,this.options.framesPerSecond||25):(t.options.alwaysShowHours?"00:":"")+(t.options.showTimecodeFrameCount?"00:00:00":"00:00"))+"</span>").appendTo(i.find(".mejs-time")):(i.find(".mejs-currenttime").parent().addClass("mejs-currenttime-container"),e('<div class="mejs-time mejs-duration-container"><span class="mejs-duration">'+(this.options.duration>0?mejs.Utility.secondsToTimeCode(this.options.duration,this.options.alwaysShowHours||this.media.duration>3600,this.options.showTimecodeFrameCount,this.options.framesPerSecond||25):(t.options.alwaysShowHours?"00:":"")+(t.options.showTimecodeFrameCount?"00:00:00":"00:00"))+"</span></div>").appendTo(i)),this.durationD=this.controls.find(".mejs-duration"),o.addEventListener("timeupdate",function(){t.updateDuration()},!1)},updateCurrent:function(){this.currenttime&&this.currenttime.html(mejs.Utility.secondsToTimeCode(this.media.currentTime,this.options.alwaysShowHours||this.media.duration>3600,this.options.showTimecodeFrameCount,this.options.framesPerSecond||25))},updateDuration:function(){this.media.duration&&this.durationD&&this.durationD.html(mejs.Utility.secondsToTimeCode(this.media.duration,this.options.alwaysShowHours,this.options.showTimecodeFrameCount,this.options.framesPerSecond||25))}})}(mejs.$),function(e){e.extend(mejs.MepDefaults,{muteText:"Mute Toggle",hideVolumeOnTouchDevices:!0,audioVolume:"horizontal",videoVolume:"vertical"}),e.extend(MediaElementPlayer.prototype,{buildvolume:function(t,i,n,o){if(!mejs.MediaFeatures.hasTouch||!this.options.hideVolumeOnTouchDevices){var a=this.isVideo?this.options.videoVolume:this.options.audioVolume,s="horizontal"==a?e('<div class="mejs-button mejs-volume-button mejs-mute"><button type="button" aria-controls="'+this.id+'" title="'+this.options.muteText+'"></button></div><div class="mejs-horizontal-volume-slider"><div class="mejs-horizontal-volume-total"></div><div class="mejs-horizontal-volume-current"></div><div class="mejs-horizontal-volume-handle"></div></div>').appendTo(i):e('<div class="mejs-button mejs-volume-button mejs-mute"><button type="button" aria-controls="'+this.id+'" title="'+this.options.muteText+'"></button><div class="mejs-volume-slider"><div class="mejs-volume-total"></div><div class="mejs-volume-current"></div><div class="mejs-volume-handle"></div></div></div>').appendTo(i),r=this.container.find(".mejs-volume-slider, .mejs-horizontal-volume-slider"),l=this.container.find(".mejs-volume-total, .mejs-horizontal-volume-total"),u=this.container.find(".mejs-volume-current, .mejs-horizontal-volume-current"),d=this.container.find(".mejs-volume-handle, .mejs-horizontal-volume-handle"),c=function(e,t){if(r.is(":visible")||t===void 0)if(e=Math.max(0,e),e=Math.min(e,1),0==e?s.removeClass("mejs-mute").addClass("mejs-unmute"):s.removeClass("mejs-unmute").addClass("mejs-mute"),"vertical"==a){var i=l.height(),n=l.position(),o=i-i*e;d.css("top",n.top+o-d.height()/2),u.height(i-o),u.css("top",n.top+o)}else i=l.width(),n=l.position(),i*=e,d.css("left",n.left+i-d.width()/2),u.width(i);else r.show(),c(e,!0),r.hide()},p=function(e){var t=null,i=l.offset();if("vertical"==a){if(t=l.height(),parseInt(l.css("top").replace(/px/,""),10),t=(t-(e.pageY-i.top))/t,0==i.top||0==i.left)return}else t=l.width(),t=(e.pageX-i.left)/t;t=Math.max(0,t),t=Math.min(t,1),c(t),0==t?o.setMuted(!0):o.setMuted(!1),o.setVolume(t)},h=!1,m=!1;s.hover(function(){r.show(),m=!0},function(){m=!1,!h&&"vertical"==a&&r.hide()}),r.bind("mouseover",function(){m=!0}).bind("mousedown",function(t){return p(t),e(document).bind("mousemove.vol",function(e){p(e)}).bind("mouseup.vol",function(){h=!1,e(document).unbind(".vol"),!m&&"vertical"==a&&r.hide()}),h=!0,!1}),s.find("button").click(function(){o.setMuted(!o.muted)}),o.addEventListener("volumechange",function(){h||(o.muted?(c(0),s.removeClass("mejs-mute").addClass("mejs-unmute")):(c(o.volume),s.removeClass("mejs-unmute").addClass("mejs-mute")))},!1),this.container.is(":visible")&&(c(t.options.startVolume),"native"===o.pluginType&&o.setVolume(t.options.startVolume))}}})}(mejs.$),function(e){e.extend(mejs.MepDefaults,{usePluginFullScreen:!0,newWindowCallback:function(){return""},fullscreenText:"Fullscreen"}),e.extend(MediaElementPlayer.prototype,{isFullScreen:!1,isNativeFullScreen:!1,docStyleOverflow:null,isInIframe:!1,buildfullscreen:function(t,i,n,o){if(t.isVideo){t.isInIframe=window.location!=window.parent.location,mejs.MediaFeatures.hasTrueNativeFullScreen&&(n=null,n=mejs.MediaFeatures.hasMozNativeFullScreen?e(document):t.container,n.bind(mejs.MediaFeatures.fullScreenEventName,function(){mejs.MediaFeatures.isFullScreen()?(t.isNativeFullScreen=!0,t.setControlsSize()):(t.isNativeFullScreen=!1,t.exitFullScreen())}));var a=this,s=e('<div class="mejs-button mejs-fullscreen-button"><button type="button" aria-controls="'+a.id+'" title="'+a.options.fullscreenText+'"></button></div>').appendTo(i);if("native"===a.media.pluginType||!a.options.usePluginFullScreen&&!mejs.MediaFeatures.isFirefox)s.click(function(){mejs.MediaFeatures.hasTrueNativeFullScreen&&mejs.MediaFeatures.isFullScreen()||t.isFullScreen?t.exitFullScreen():t.enterFullScreen()});else{var r=null;if(function(){var e=document.createElement("x"),t=document.documentElement,i=window.getComputedStyle;return"pointerEvents"in e.style?(e.style.pointerEvents="auto",e.style.pointerEvents="x",t.appendChild(e),i=i&&"auto"===i(e,"").pointerEvents,t.removeChild(e),!!i):!1}()&&!mejs.MediaFeatures.isOpera){var l=!1,u=function(){l&&(d.hide(),c.hide(),p.hide(),s.css("pointer-events",""),a.controls.css("pointer-events",""),l=!1)},d=e('<div class="mejs-fullscreen-hover" />').appendTo(a.container).mouseover(u),c=e('<div class="mejs-fullscreen-hover"  />').appendTo(a.container).mouseover(u),p=e('<div class="mejs-fullscreen-hover"  />').appendTo(a.container).mouseover(u),h=function(){var e={position:"absolute",top:0,left:0};d.css(e),c.css(e),p.css(e),d.width(a.container.width()).height(a.container.height()-a.controls.height()),e=s.offset().left-a.container.offset().left,fullScreenBtnWidth=s.outerWidth(!0),c.width(e).height(a.controls.height()).css({top:a.container.height()-a.controls.height()}),p.width(a.container.width()-e-fullScreenBtnWidth).height(a.controls.height()).css({top:a.container.height()-a.controls.height(),left:e+fullScreenBtnWidth})};e(document).resize(function(){h()}),s.mouseover(function(){if(!a.isFullScreen){var e=s.offset(),i=t.container.offset();o.positionFullscreenButton(e.left-i.left,e.top-i.top,!1),s.css("pointer-events","none"),a.controls.css("pointer-events","none"),d.show(),p.show(),c.show(),h(),l=!0}}),o.addEventListener("fullscreenchange",function(){u()})}else s.mouseover(function(){null!==r&&(clearTimeout(r),delete r);var e=s.offset(),i=t.container.offset();o.positionFullscreenButton(e.left-i.left,e.top-i.top,!0)}).mouseout(function(){null!==r&&(clearTimeout(r),delete r),r=setTimeout(function(){o.hideFullscreenButton()},1500)})}t.fullscreenBtn=s,e(document).bind("keydown",function(e){(mejs.MediaFeatures.hasTrueNativeFullScreen&&mejs.MediaFeatures.isFullScreen()||a.isFullScreen)&&27==e.keyCode&&t.exitFullScreen()})}},enterFullScreen:function(){var t=this;if("native"===t.media.pluginType||!mejs.MediaFeatures.isFirefox&&!t.options.usePluginFullScreen){if(docStyleOverflow=document.documentElement.style.overflow,document.documentElement.style.overflow="hidden",normalHeight=t.container.height(),normalWidth=t.container.width(),"native"===t.media.pluginType)if(mejs.MediaFeatures.hasTrueNativeFullScreen)mejs.MediaFeatures.requestFullScreen(t.container[0]),t.isInIframe&&setTimeout(function i(){t.isNativeFullScreen&&(e(window).width()!==screen.width?t.exitFullScreen():setTimeout(i,500))},500);else if(mejs.MediaFeatures.hasSemiNativeFullScreen)return t.media.webkitEnterFullscreen(),void 0;if(t.isInIframe){var n=t.options.newWindowCallback(this);if(""!==n){if(!mejs.MediaFeatures.hasTrueNativeFullScreen)return t.pause(),window.open(n,t.id,"top=0,left=0,width="+screen.availWidth+",height="+screen.availHeight+",resizable=yes,scrollbars=no,status=no,toolbar=no"),void 0;setTimeout(function(){t.isNativeFullScreen||(t.pause(),window.open(n,t.id,"top=0,left=0,width="+screen.availWidth+",height="+screen.availHeight+",resizable=yes,scrollbars=no,status=no,toolbar=no"))},250)}}t.container.addClass("mejs-container-fullscreen").width("100%").height("100%"),setTimeout(function(){t.container.css({width:"100%",height:"100%"}),t.setControlsSize()},500),"native"===t.pluginType?t.$media.width("100%").height("100%"):(t.container.find("object, embed, iframe").width("100%").height("100%"),t.media.setVideoSize(e(window).width(),e(window).height())),t.layers.children("div").width("100%").height("100%"),t.fullscreenBtn&&t.fullscreenBtn.removeClass("mejs-fullscreen").addClass("mejs-unfullscreen"),t.setControlsSize(),t.isFullScreen=!0}},exitFullScreen:function(){"native"!==this.media.pluginType&&mejs.MediaFeatures.isFirefox?this.media.setFullscreen(!1):(mejs.MediaFeatures.hasTrueNativeFullScreen&&(mejs.MediaFeatures.isFullScreen()||this.isFullScreen)&&mejs.MediaFeatures.cancelFullScreen(),document.documentElement.style.overflow=docStyleOverflow,this.container.removeClass("mejs-container-fullscreen").width(normalWidth).height(normalHeight),"native"===this.pluginType?this.$media.width(normalWidth).height(normalHeight):(this.container.find("object embed").width(normalWidth).height(normalHeight),this.media.setVideoSize(normalWidth,normalHeight)),this.layers.children("div").width(normalWidth).height(normalHeight),this.fullscreenBtn.removeClass("mejs-unfullscreen").addClass("mejs-fullscreen"),this.setControlsSize(),this.isFullScreen=!1)}})}(mejs.$),function(e){e.extend(mejs.MepDefaults,{startLanguage:"",tracksText:"Captions/Subtitles"}),e.extend(MediaElementPlayer.prototype,{hasChapters:!1,buildtracks:function(t,i,n,o){if(t.isVideo&&0!=t.tracks.length){var a;for(t.chapters=e('<div class="mejs-chapters mejs-layer"></div>').prependTo(n).hide(),t.captions=e('<div class="mejs-captions-layer mejs-layer"><div class="mejs-captions-position"><span class="mejs-captions-text"></span></div></div>').prependTo(n).hide(),t.captionsText=t.captions.find(".mejs-captions-text"),t.captionsButton=e('<div class="mejs-button mejs-captions-button"><button type="button" aria-controls="'+this.id+'" title="'+this.options.tracksText+'"></button><div class="mejs-captions-selector"><ul><li><input type="radio" name="'+t.id+'_captions" id="'+t.id+'_captions_none" value="none" checked="checked" /><label for="'+t.id+'_captions_none">None</label></li></ul></div></div>').appendTo(i).hover(function(){e(this).find(".mejs-captions-selector").css("visibility","visible")},function(){e(this).find(".mejs-captions-selector").css("visibility","hidden")}).delegate("input[type=radio]","click",function(){if(lang=this.value,"none"==lang)t.selectedTrack=null;else for(a=0;t.tracks.length>a;a++)if(t.tracks[a].srclang==lang){t.selectedTrack=t.tracks[a],t.captions.attr("lang",t.selectedTrack.srclang),t.displayCaptions();break}}),t.options.alwaysShowControls?t.container.find(".mejs-captions-position").addClass("mejs-captions-position-hover"):t.container.bind("mouseenter",function(){t.container.find(".mejs-captions-position").addClass("mejs-captions-position-hover")}).bind("mouseleave",function(){o.paused||t.container.find(".mejs-captions-position").removeClass("mejs-captions-position-hover")}),t.trackToLoad=-1,t.selectedTrack=null,t.isLoadingTrack=!1,a=0;t.tracks.length>a;a++)"subtitles"==t.tracks[a].kind&&t.addTrackButton(t.tracks[a].srclang,t.tracks[a].label);t.loadNextTrack(),o.addEventListener("timeupdate",function(){t.displayCaptions()},!1),o.addEventListener("loadedmetadata",function(){t.displayChapters()},!1),t.container.hover(function(){t.hasChapters&&(t.chapters.css("visibility","visible"),t.chapters.fadeIn(200).height(t.chapters.find(".mejs-chapter").outerHeight()))},function(){t.hasChapters&&!o.paused&&t.chapters.fadeOut(200,function(){e(this).css("visibility","hidden"),e(this).css("display","block")})}),null!==t.node.getAttribute("autoplay")&&t.chapters.css("visibility","hidden")}},loadNextTrack:function(){this.trackToLoad++,this.trackToLoad<this.tracks.length?(this.isLoadingTrack=!0,this.loadTrack(this.trackToLoad)):this.isLoadingTrack=!1},loadTrack:function(t){var i=this,n=i.tracks[t];e.ajax({url:n.src,dataType:"text",success:function(e){n.entries="string"==typeof e&&/<tt\s+xml/gi.exec(e)?mejs.TrackFormatParser.dfxp.parse(e):mejs.TrackFormatParser.webvvt.parse(e),n.isLoaded=!0,i.enableTrackButton(n.srclang,n.label),i.loadNextTrack(),"chapters"==n.kind&&i.media.duration>0&&i.drawChapters(n)},error:function(){i.loadNextTrack()}})},enableTrackButton:function(t,i){""===i&&(i=mejs.language.codes[t]||t),this.captionsButton.find("input[value="+t+"]").prop("disabled",!1).siblings("label").html(i),this.options.startLanguage==t&&e("#"+this.id+"_captions_"+t).click(),this.adjustLanguageBox()
},addTrackButton:function(t,i){""===i&&(i=mejs.language.codes[t]||t),this.captionsButton.find("ul").append(e('<li><input type="radio" name="'+this.id+'_captions" id="'+this.id+"_captions_"+t+'" value="'+t+'" disabled="disabled" /><label for="'+this.id+"_captions_"+t+'">'+i+" (loading)</label></li>")),this.adjustLanguageBox(),this.container.find(".mejs-captions-translations option[value="+t+"]").remove()},adjustLanguageBox:function(){this.captionsButton.find(".mejs-captions-selector").height(this.captionsButton.find(".mejs-captions-selector ul").outerHeight(!0)+this.captionsButton.find(".mejs-captions-translations").outerHeight(!0))},displayCaptions:function(){if(this.tracks!==void 0){var e,t=this.selectedTrack;if(null!=t&&t.isLoaded)for(e=0;t.entries.times.length>e;e++)if(this.media.currentTime>=t.entries.times[e].start&&this.media.currentTime<=t.entries.times[e].stop)return this.captionsText.html(t.entries.text[e]),this.captions.show().height(0),void 0;this.captions.hide()}},displayChapters:function(){var e;for(e=0;this.tracks.length>e;e++)if("chapters"==this.tracks[e].kind&&this.tracks[e].isLoaded){this.drawChapters(this.tracks[e]),this.hasChapters=!0;break}},drawChapters:function(t){var i,n,o=this,a=n=0;for(o.chapters.empty(),i=0;t.entries.times.length>i;i++)n=t.entries.times[i].stop-t.entries.times[i].start,n=Math.floor(100*(n/o.media.duration)),(n+a>100||i==t.entries.times.length-1&&100>n+a)&&(n=100-a),o.chapters.append(e('<div class="mejs-chapter" rel="'+t.entries.times[i].start+'" style="left: '+(""+a)+"%;width: "+(""+n)+'%;"><div class="mejs-chapter-block'+(i==t.entries.times.length-1?" mejs-chapter-block-last":"")+'"><span class="ch-title">'+t.entries.text[i]+'</span><span class="ch-time">'+mejs.Utility.secondsToTimeCode(t.entries.times[i].start)+"&ndash;"+mejs.Utility.secondsToTimeCode(t.entries.times[i].stop)+"</span></div></div>")),a+=n;o.chapters.find("div.mejs-chapter").click(function(){o.media.setCurrentTime(parseFloat(e(this).attr("rel"))),o.media.paused&&o.media.play()}),o.chapters.show()}}),mejs.language={codes:{af:"Afrikaans",sq:"Albanian",ar:"Arabic",be:"Belarusian",bg:"Bulgarian",ca:"Catalan",zh:"Chinese","zh-cn":"Chinese Simplified","zh-tw":"Chinese Traditional",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch",en:"English",et:"Estonian",tl:"Filipino",fi:"Finnish",fr:"French",gl:"Galician",de:"German",el:"Greek",ht:"Haitian Creole",iw:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",ga:"Irish",it:"Italian",ja:"Japanese",ko:"Korean",lv:"Latvian",lt:"Lithuanian",mk:"Macedonian",ms:"Malay",mt:"Maltese",no:"Norwegian",fa:"Persian",pl:"Polish",pt:"Portuguese",ro:"Romanian",ru:"Russian",sr:"Serbian",sk:"Slovak",sl:"Slovenian",es:"Spanish",sw:"Swahili",sv:"Swedish",tl:"Tagalog",th:"Thai",tr:"Turkish",uk:"Ukrainian",vi:"Vietnamese",cy:"Welsh",yi:"Yiddish"}},mejs.TrackFormatParser={webvvt:{pattern_identifier:/^([a-zA-z]+-)?[0-9]+$/,pattern_timecode:/^([0-9]{2}:[0-9]{2}:[0-9]{2}([,.][0-9]{1,3})?) --\> ([0-9]{2}:[0-9]{2}:[0-9]{2}([,.][0-9]{3})?)(.*)$/,parse:function(t){var i=0;t=mejs.TrackFormatParser.split2(t,/\r?\n/);for(var n,o,a={text:[],times:[]};t.length>i;i++)if(this.pattern_identifier.exec(t[i])&&(i++,(n=this.pattern_timecode.exec(t[i]))&&t.length>i)){for(i++,o=t[i],i++;""!==t[i]&&t.length>i;)o=o+"\n"+t[i],i++;o=e.trim(o).replace(/(\b(https?|ftp|file):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/gi,"<a href='$1' target='_blank'>$1</a>"),a.text.push(o),a.times.push({start:0==mejs.Utility.convertSMPTEtoSeconds(n[1])?.2:mejs.Utility.convertSMPTEtoSeconds(n[1]),stop:mejs.Utility.convertSMPTEtoSeconds(n[3]),settings:n[5]})}return a}},dfxp:{parse:function(t){t=e(t).filter("tt");var i=0;i=t.children("div").eq(0);var n=i.find("p");i=t.find("#"+i.attr("style"));var o,a;if(t={text:[],times:[]},i.length&&(a=i.removeAttr("id").get(0).attributes,a.length))for(o={},i=0;a.length>i;i++)o[a[i].name.split(":")[1]]=a[i].value;for(i=0;n.length>i;i++){var s;if(a={start:null,stop:null,style:null},n.eq(i).attr("begin")&&(a.start=mejs.Utility.convertSMPTEtoSeconds(n.eq(i).attr("begin"))),!a.start&&n.eq(i-1).attr("end")&&(a.start=mejs.Utility.convertSMPTEtoSeconds(n.eq(i-1).attr("end"))),n.eq(i).attr("end")&&(a.stop=mejs.Utility.convertSMPTEtoSeconds(n.eq(i).attr("end"))),!a.stop&&n.eq(i+1).attr("begin")&&(a.stop=mejs.Utility.convertSMPTEtoSeconds(n.eq(i+1).attr("begin"))),o){s="";for(var r in o)s+=r+":"+o[r]+";"}s&&(a.style=s),0==a.start&&(a.start=.2),t.times.push(a),a=e.trim(n.eq(i).html()).replace(/(\b(https?|ftp|file):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/gi,"<a href='$1' target='_blank'>$1</a>"),t.text.push(a),0==t.times.start&&(t.times.start=2)}return t}},split2:function(e,t){return e.split(t)}},3!="x\n\ny".split(/\n/gi).length&&(mejs.TrackFormatParser.split2=function(e,t){var i,n=[],o="";for(i=0;e.length>i;i++)o+=e.substring(i,i+1),t.test(o)&&(n.push(o.replace(t,"")),o="");return n.push(o),n})}(mejs.$),function(e){e.extend(mejs.MepDefaults,{contextMenuItems:[{render:function(e){return e.enterFullScreen===void 0?null:e.isFullScreen?"Turn off Fullscreen":"Go Fullscreen"},click:function(e){e.isFullScreen?e.exitFullScreen():e.enterFullScreen()}},{render:function(e){return e.media.muted?"Unmute":"Mute"},click:function(e){e.media.muted?e.setMuted(!1):e.setMuted(!0)}},{isSeparator:!0},{render:function(){return"Download Video"},click:function(e){window.location.href=e.media.currentSrc}}]}),e.extend(MediaElementPlayer.prototype,{buildcontextmenu:function(t){t.contextMenu=e('<div class="mejs-contextmenu"></div>').appendTo(e("body")).hide(),t.container.bind("contextmenu",function(e){return t.isContextMenuEnabled?(e.preventDefault(),t.renderContextMenu(e.clientX-1,e.clientY-1),!1):void 0}),t.container.bind("click",function(){t.contextMenu.hide()}),t.contextMenu.bind("mouseleave",function(){t.startContextMenuTimer()})},isContextMenuEnabled:!0,enableContextMenu:function(){this.isContextMenuEnabled=!0},disableContextMenu:function(){this.isContextMenuEnabled=!1},contextMenuTimeout:null,startContextMenuTimer:function(){var e=this;e.killContextMenuTimer(),e.contextMenuTimer=setTimeout(function(){e.hideContextMenu(),e.killContextMenuTimer()},750)},killContextMenuTimer:function(){var e=this.contextMenuTimer;null!=e&&(clearTimeout(e),delete e)},hideContextMenu:function(){this.contextMenu.hide()},renderContextMenu:function(t,i){for(var n=this,o="",a=n.options.contextMenuItems,s=0,r=a.length;r>s;s++)if(a[s].isSeparator)o+='<div class="mejs-contextmenu-separator"></div>';else{var l=a[s].render(n);null!=l&&(o+='<div class="mejs-contextmenu-item" data-itemindex="'+s+'" id="element-'+1e6*Math.random()+'">'+l+"</div>")}n.contextMenu.empty().append(e(o)).css({top:i,left:t}).show(),n.contextMenu.find(".mejs-contextmenu-item").each(function(){var t=e(this),i=parseInt(t.data("itemindex"),10),o=n.options.contextMenuItems[i];o.show!==void 0&&o.show(t,n),t.click(function(){o.click!==void 0&&o.click(n),n.contextMenu.hide()})}),setTimeout(function(){n.killControlsTimer("rev3")},100)}})}(mejs.$),function(e){var t;e.FMInitLanguage=function(i){var n={language:"sv-se",languagePath:"content/language/",projectPrefix:"",automaticLoad:!1,callback:function(){}};i=e.extend(n,i);var o={cache:!1,dataType:"text"};""!=i.projectPrefix&&(i.projectPrefix+="_");var a=i.languagePath+i.language+"/"+i.projectPrefix+"text_"+i.language+".xml";e.ajax(e.extend(o,{url:a})).done(function(n){t=e(e.parseXML(n)),i.automaticLoad?e.FMLoadLanguage(i.callback):i.callback.call()})},e.FMGetText=function(e){for(var i="",n=0;e.length>n;n++)i+=" #"+e[n];return t.find(i).text()},e.FMLoadLanguage=function(i){t.find("part").each(function(){var t="#"+e(this).attr("id");e(this).find("item").each(function(){var i="#"+e(this).attr("id"),n=e(this).text();e(t+" "+i).html(n)})}),i.call(this)}}(jQuery),function(e){function t(e){var t=0;return t+=3600*parseInt(e.substr(0,2),10),t+=60*parseInt(e.substr(3,2),10),t+=parseInt(e.substr(6,2),10)}var i;e.FMInitSubtitle=function(n){var o={language:"sv-se",languagePath:"content/language/",projectPrefix:"",videoId:"#video",targetId:"#video-subtitle-container",callback:function(){}};n=e.extend(o,n);var a={async:!1,cache:!1,dataType:"text"};""!=n.projectPrefix&&(n.projectPrefix+="_");var s=n.languagePath+n.language+"/"+n.projectPrefix+"subtitle_"+n.language+".xml",r=e.ajax(e.extend(a,{url:s})),l="";200==r.status&&(l=r.responseText);var u=e.parseXML(l);i=e(u);var d=Popcorn(n.videoId);console.log("Video duration: "+d.duration()),i.find(n.videoId+" item").each(function(){var i=t(e(this).attr("time")),o=1e3;e(this).next().attr("time")&&(o=t(e(this).next().attr("time"))),e(this).next().attr("time"),console.log(""+e(this).attr("id")+": start: "+i+" end: "+o),d.subtitle({start:i,end:o,target:n.targetId.substr(1),text:e(this).text()})}),d.code({start:3,end:15,onStart:function(){var t=e('<div class="overlay">Testar en overlay!</div>');t.hide(),e("#video-example").append(t),t.fadeIn("slow")},onEnd:function(){e(".overlay").fadeOut("slow")}}),d.play(),n.callback.call(this)}}(jQuery),function(e){function t(e){var t=e.languagePath+e.language+"/"+e.projectPrefix+"slides_text_"+e.language+".xml";return o(t)}function i(e){var t=e.languagePath+e.language+"/"+e.projectPrefix+"slides_manifest_"+e.language+".xml";return o(t)}function n(e){var t=e.contentPath+e.projectPrefix+"slides_structure"+".xml";return o(t)}function o(t){var i={async:!0,cache:!1,dataType:"text"};return e.ajax(e.extend(i,{url:t}))}function a(e){return r.find("[id='"+e+"']").length>0?!0:!1}var s,r,l;e.FMInitSlides=function(o){var a={language:"en-global",languagePath:"content/language/",contentPath:"content/",projectPrefix:"",automaticLoad:!1,callback:function(){}};o=e.extend(a,o),""!=o.projectPrefix&&(o.projectPrefix+="_"),e.when(t(o),i(o),n(o)).done(function(t,i,n){s=e(e.parseXML(t[0])),r=e(e.parseXML(i[0])),l=e(e.parseXML(n[0])),o.callback.call()})},e.FMGetAllSlideIds=function(){var t=[];return e(r).find("slide").each(function(){t.push(e(this).attr("id"))}),t},e.FMGetManifestXml=function(){return r},e.FMGetSlideText=function(e){for(var t="",i=0;e.length>i;i++)t+="[id='"+e[i]+"'] ";return s.find(t).text()},e.FMGetSlideStructure=function(e){var t="[id='"+e+"']";return l.find(t)},e.FMGetHotspotsForInterface=function(t){var i=[];return l.find("[type='"+t+"']").each(function(){var t=e(this).parent().parent().attr("id");if(a(t)){var n={id:t};e.each(this.attributes,function(e,t){n[t.name]=t.value}),i.push(n)}}),i},e.FMLoadSlideLanguage=function(t){$xml.find("part").each(function(){var t="#"+e(this).attr("id");e(this).find("item").each(function(){var i="#"+e(this).attr("id"),n=e(this).text();e(t+" "+i).html(n)})}),t.call(this)}}(jQuery),this.funkis=this.funkis||{},function(){function e(e){this.options=e,this.init()}e.prototype.$currentSlide,e.prototype.options,e.prototype.init=function(){},e.prototype.showSlide=function(e){var t=e.slideId,i=e.originX,n=e.originY;enableTouchScroll(),console.log("Knowledgelibrary: Showing slide: "+t);var o=$.FMGetSlideStructure(t),a=this,s=$("<div id='close-button'></div>");s.fastClick(function(){a.closeCurrentSlide()});var r=$("<div id='slide-outer-container' />"),l=$("<div id='slide-container' />"),u=$("<div class='slide-shadow'></div>"),d=$("<div id='"+t+"' class='slide "+o.attr("style").substring(1)+"'></div>");l.append(s),l.append(u),l.append(d),r.append(l);var c=25;o.find("page media").each(function(){var e=$(this).attr("id"),t=$(this).attr("style"),i=$("<div id='"+e+"'>"+"</div>");if("video"==t){i.addClass("video");var n;n=Modernizr.video.webm?a.options.paths.mediaPath+"slides"+$(this).attr("path").replace("mp4","webm"):a.options.paths.mediaPath+"slides"+$(this).attr("path");var o=$("<video autoplay loop controls='false' src='"+n+"' width="+$(this).attr("width")+" height="+$(this).attr("height")+" />");i.append(o),i.css("left",$(this).attr("x")+"px"),i.css("top",$(this).attr("y")-c+"px")}else"anim"==t||(i.addClass(t.substring(1)),i.append("<img src='content/media/slides"+$(this).attr("path")+"'/>"));d.append(i)});var p=0;o.find("page text").each(function(){var e=$(this),i=e.attr("id"),n=e.attr("style").substring(1),o=$("<div id='"+i+"' class='"+n+"'><p>"+$.FMGetSlideText(["slides",t,e.parent().attr("id"),i])+"</p></div>");if(d.append(o),"absolute"==e.attr("style"))o.css("position","absolute"),o.css("left",Math.floor(e.attr("x"))+3+"px"),o.css("top",Math.floor(e.attr("y")-1.2*c)+"px"),e.attr("width")?o.css("width",e.attr("width")+"px"):o.css("width","400px"),"right"==e.attr("align")&&(o.css("left",e.attr("x")-400+"px"),o.css("text-align","right"));else if(-1!=n.indexOf("header")){var a=o.clone();a.css("display","none"),$("body").append(a);var s=.8*a.innerHeight();$("html").hasClass("ie7")&&(s*=2),a.remove(),p+=Math.floor(s)}else{var r=o.position().top;o.css("top",Math.floor(r+p)+"px")}}),this.$currentSlide&&this.$currentSlide.remove(),this.$currentSlide=r,r.hide(),$("#main").append(r),console.log("originCoordinates",i,n);var h=$("<div id='slide-scale-animation'></div>");if(h.css({left:i,top:n}),$("body").append(h),window.isFullscreen){var m=getWindowProperties(),f=$("body").hasClass("flash");if(f){var v=$("#exteriorWalkaround").offset();h.css({left:i+v.left,top:n+v.top})}var g=m.width/2-379,y=m.height/2-238;h.animate({height:"476px",width:"758px",left:g+"px",top:y+"px"},300,function(){$(this).remove(),r.show(),$("video").mediaelementplayer({loop:!0,features:[]})})}else h.animate({height:"476px",width:"758px",left:0,top:0},300,function(){$(this).remove(),r.show(),$("video").mediaelementplayer({loop:!0,features:[]})});var b=document.createElement("div");b.style.height="101%",document.body.appendChild(b),setTimeout(function(){document.body.removeChild(b),b=null},0)},e.prototype.getCssValue=function(e,t){var i=$("<div>").css("display","none").addClass(t);$("body").append(i);try{return i.css(e)}finally{i.remove()}},e.prototype.closeCurrentSlide=function(){return disableTouchScroll(),mejs.players=[],$(".mejs-mediaelement object").each(function(){console.log("Removing swf: "+$(this).attr("id")),swfobject.removeSWF($(this).attr("id"))}),this.$currentSlide?(this.$currentSlide.remove(),this.$currentSlide=null,!0):!1},e.prototype.animateIn=function(e){e.removeClass("hide-slide").addClass("show-slide")},funkis.KnowledgeLibrary=e}(),this.funkis=this.funkis||{},function(){function e(e,t){this.knowledgeLibrary=t,this.initSkybox(e),this.initHotspots(),this.initNavigation(e)}e.prototype.knowledgeLibrary,e.prototype.initSkybox=function(e){var t=Array("north","west","east","south","top","bottom"),i=$("<div id='interiorPanoramaContainer'></div>");i.append("<div id='bigCube'><div id='insideCube'></div></div>"),this.driverPosition=e.isRhd?"rhd":"lhd";for(var n=0;t.length>n;n++){var o=$("<img class='"+t[n]+"' src='"+e.paths.interfacePath+"cab_center_"+this.driverPosition+"/cube_"+n+".jpg' />");i.find("#insideCube").append(o)}i.append($("<div id='hotspots'></div>")),$("#main").append(i),window.loadComplete()},e.prototype.initNavigation=function(e){function t(e){u=e.pageX-v.left,d=e.pageY-v.top,w=!0,$(this).addClass("on"),e.preventDefault&&e.preventDefault()}function i(e){if(w){c=e.pageX-v.left,p=e.pageY-v.top;var t=(u-h/2)/(h/2),i=-((d-m/f)/(m/f)),n=(c-h/2)/(h/2),o=-((p-m/f)/(m/f)),a=n-t,s=o-i;b=g*a+j,valTB=y*s+ayT,b%=360,valTB%=360,valTB=Math.max(valTB,-90),valTB=Math.min(valTB,90),value="rotateX("+-valTB+"deg) rotateY("+-b+"deg)",$("#insideCube").css("transform",value),k.positionBillboards(-valTB,b,k.perspective,k.shiftX,k.shiftY),e.preventDefault&&e.preventDefault()}}function n(){w=!1,j=b,ayT=valTB,$(this).removeClass("on")}function o(){w=!1,j=b,ayT=valTB,$(this).removeClass("on")}function a(e){return t(l(e)),!1}function s(e){return e.preventDefault(),i(l(e)),!1}function r(e){return n(l(e)),!1}function l(e){return e.originalEvent.touches.item(0)}Array("north","west","east","south","top","bottom");var u,d,c,p,h=$("#interiorPanoramaContainer").width(),m=$("#interiorPanoramaContainer").height(),f=2,v=$("#interiorPanoramaContainer").offset(),g=45,y=45,b=valTB=value=0,w=!1,j=ayT=0,k=this;e.isRhd?(ayT=valTB=16,j=b=-29):(ayT=valTB=16,j=b=29),k.positionBillboards(-valTB,b,k.perspective,k.shiftX,k.shiftY),$("#insideCube").css("transform","rotateX("+-valTB+"deg) rotateY("+-b+"deg)"),$("#interiorPanoramaContainer").mousedown(t).mousemove(i).mouseup(n).mouseleave(o),$("#interiorPanoramaContainer").bind("touchstart",a).bind("touchmove",s).bind("touchend",r)},e.prototype.initHotspots=function(){var e=$("#insideCube");$("#interiorPanoramaContainer");var t=$("#hotspots"),i=$.FMGetHotspotsForInterface("cab_center_"+this.driverPosition),n=this;this.billboards=[],$.each(i,function(){var i=n.convertPointToLocalCoordinateSpace({x:this.labelX,y:this.labelY,z:this.labelZ}),o=n.convertPointToLocalCoordinateSpace({x:this.truckX,y:this.truckY,z:this.truckZ}),a=$("<div id='"+escape(this.id)+"' class='hotspot'></div>"),s=$("<div class='line'></div>"),r=$("<div id='"+escape(this.id)+"' class='billboard'>"+$.FMGetSlideText(["slides",this.id,"title"])+"</div>");r.attr("x",i.x-1500),r.attr("y",i.y-1500),r.attr("z",i.z),t.append(r),r.fastClick(function(){console.log("Hotspot clicked! Id: "+unescape($(this).attr("id"))),$this=$(this),n.knowledgeLibrary.showSlide({slideId:unescape($this.attr("id")),originX:$this.position().left,originY:$this.position().top})}),a.append(s),e.append(a),n.billboards.push(r);var l=n.distanceBetweenPoints(i,o);s.height(l),n.setCoordinates(s,i)});var o=$("#bigCube");this.perspective=Number(o.css("perspective").split("px")[0]),this.shiftX=3e3+Number(o.css("marginLeft").split("px")[0]),this.shiftY=3e3+Number(o.css("marginTop").split("px")[0]),n.positionBillboards(0,0,this.perspective,this.shiftX,this.shiftY)},e.prototype.createBoxMatrix=function(e,t){var i=e*Math.PI/180,n=t*Math.PI/180,o=Matrix.create([[1,0,0,0],[0,Math.cos(i),-Math.sin(i),0],[0,Math.sin(i),Math.cos(i),0],[0,0,0,1]]),a=Matrix.create([[Math.cos(n),0,-Math.sin(n),0],[0,1,0,0],[Math.sin(n),0,Math.cos(n),0],[0,0,0,1]]);return o.x(a)},e.prototype.positionBillboards=function(e,t,i,n,o){var a=this.createBoxMatrix(e,t);$.each(this.billboards,function(e,t){var s=Vector.create([Number(t.attr("x")),Number(t.attr("y")),Number(t.attr("z")),1]),r=a.x(s),l=i/(i-r.elements[2]);0>r.elements[2]?(t.css("display","block"),t.css("transform","translate("+Math.floor(n+r.elements[0]*l-t.width()/2)+"px, "+Math.floor(o+r.elements[1]*l-t.height()/2)+"px)")):t.css("display","none")})},e.prototype.setCoordinates=function(e,t,i){i?this.applyTransform(e,"translate3d("+(t.x-e.width()/2)+"px, "+(t.y-3*e.height())+"px,"+t.z+"px)"):this.applyTransform(e,"translate3d("+t.x+"px, "+t.y+"px,"+t.z+"px)")},e.prototype.setRotation=function(e,t,i){this.applyTransform(e,"rotate3d("+t.elements[0]+", "+t.elements[1]+","+t.elements[2]+", "+i+"deg)")},e.prototype.applyTransform=function(e,t){var i=e.css("transform")||e.css("-moz-transform")||e.css("-webkit-transform");"none"!=i&&(t+=" "+i),e.css("transform",t)},e.prototype.convertPointToLocalCoordinateSpace=function(e){return{x:e.x/4+1500,y:-1*e.y/4+1500,z:-1*e.z/4}},e.prototype.distanceBetweenPoints=function(e,t){var i=e.x-t.x,n=e.y-t.y,o=e.z-t.z;return Math.sqrt(i*i+n*n+o*o)},funkis.InteriorPanorama=e}(),this.funkis=this.funkis||{},function(){function e(e,t){this.initialize(e,t)}e.prototype.knowledgeLibrary,e.prototype.stage,e.prototype.truck,e.prototype._hotspotObjects,e.prototype.origoX=0,e.prototype.origoY=0,e.prototype.truckCenterX=0,e.prototype.truckCenterY=0,e.prototype.mouseIsDown=!1,e.prototype.lastMouseX=0,e.prototype.lastTimelineFrame=0,e.prototype.cameraSpeed=.2,e.prototype.hotspotWidths={},e.prototype.hotspots,e.prototype.frameHotspotValues,e.prototype.initialize=function(e,t){$("#main").append($("<div id='exteriorWalkaround'></div>"));var i=this;this.knowledgeLibrary=t,this.truckType=e.truckType+(e.isRhd?"_rhd":"_lhd"),console.log("ExteriorWalkaround initializing "+this.truckType),this.initTruckProperties(),this.initSequenceTruck(),this.initLineCanvas(),$.getJSON("content/media/interfaces/"+this.truckType+"/hotspots.json",function(e){i._hotspotObjects=e,i.initHotspots(),i.preCalculateHotspotPositions(),i.updateHotspotPositions(0)})},e.prototype.initTruckProperties=function(){var e=758,t=488;this.origoX=e/2,this.origoY=t/2,this.truckCenterX=this.origoX,this.truckCenterY=321},e.prototype.initSequenceTruck=function(){for(var e=this,t=Array(72),i=71;i>=0;i--){var n=10>i?"0000"+i:"000"+i;t[i]="content/media/interfaces/"+this.truckType+"/iframe/"+this.truckType+"_"+n+".jpg"}var o={reverse:!0,loopFrame:47};this.isRigid()&&(o.reverse=!1,o.loopFrame=61);var a=$("<div id='spritespin'></div>");a.spritespin({width:758,height:488,frames:t.length,source:t,animate:!1,loop:!1,enableCanvas:!0,reverse:o.reverse,loopFrame:o.loopFrame,onFrame:function(){e.updateHotspotPositions(a.spritespin("frame"))},onLoad:function(){e.truckLoaded()}}),$("#exteriorWalkaround").append(a),a.mousedown(function(){console.log("Spritespin mousedown: Disabling hotspot mouse events"),$("#hotspots").css("pointer-events","none")}),a.mouseup(function(){console.log("Spritespin mouseup: Enabling hotspot mouse events"),$("#hotspots").css("pointer-events","auto")}),$("#exteriorWalkaround").hide()},e.prototype.truckLoaded=function(){$("#exteriorWalkaround").show(),window.loadComplete();var e=$("#spritespin");this.isRigid()?e.spritespin("frame",54):e.spritespin("frame",54),setTimeout(function(){e.spritespin("animate",!0,!1)},1200)},e.prototype.isRigid=function(){return-1!=this.truckType.indexOf("rigid")},e.prototype.initHotspots=function(){var e=this._hotspotObjects;this.hotspots=[];var t=$("<div id='hotspots'></div>");$("#exteriorWalkaround").append(t);var i=this,n=$("<div class='hotspot-2d unselectable'></div>"),o=$("<div class='label unselectable'><p>Test</p></div>");n.append(o),$("body").append(n),this.labelHeight=o.outerHeight(),n.remove(),$.each(e,function(e){var n=$("<div id="+escape(e)+" class='hotspot-2d unselectable'></div>"),o=$("<div id="+escape(e)+" class='label'><p>"+$.FMGetSlideText(["slides",e,"title"])+"</p></div>");n.append(o),t.append(n),console.log("Hotspot width: "+i.hotspotWidths[e]),n.mouseover(function(){i.highlightLine($(this).attr("id"))}),n.mouseout(function(){i.updateHotspotPositions(i.currentFrame)}),n.fastClick(function(){console.log("Label fastClicked!"),i.knowledgeLibrary.showSlide({slideId:unescape($(this).attr("id")),originX:n.position().left,originY:n.position().top})}),i.hotspots.push(n)})},e.prototype.initLineCanvas=function(){var e=$("<canvas id='lineCanvas' width='758px' height='487px'>Your browser doesn't support the awesome canvas element.</canvas>");$("#spritespin").append(e),this.lineCanvas=e[0]},e.prototype.highlightLine=function(e){console.log("Highlight line for hotspot: "+e);var t=document.getElementById("lineCanvas").getContext("2d");t.lineWidth=1,t.strokeStyle="#004393",t.beginPath();var i=this.frameHotspotValues[this.currentFrame][unescape(e)];t.moveTo(i.x,i.y),t.lineTo(i.truckX,i.truckY),t.stroke()},e.prototype.preCalculateHotspotPositions=function(){this.frameHotspotValues=Array(72);for(var e=this,t=this._hotspotObjects,i=this.frameHotspotValues.length-1;i>=0;i--){var n=5*i.mod(72)*Math.PI/180,o=180*n/Math.PI,a={};$.each(t,function(t){var i={x:-1,y:-1,truckX:-1,truckY:-1,opacity:1,lineLength:-1,lineAngle:-1,insideInterval:!1},s=0>this.label.yOffset?-1:1;i.x=Math.floor(e.truckCenterX+this.label.width/2*Math.cos(n+this.label.angleOffset)),i.y=Math.floor(e.truckCenterY+this.label.yOffset+-1*this.label.height/2*s*Math.sin(n+this.label.angleOffset)),s=0>this.truck.yOffset?-1:1;var r=e.truckCenterX+this.truck.width/2*Math.cos(n+this.truck.angleOffset),l=e.truckCenterY+this.truck.yOffset+-1*this.truck.height/2*s*Math.sin(n+this.truck.angleOffset);i.truckX=r,i.truckY=l,i.lineLength=Math.sqrt((i.x-r)*(i.x-r)+(i.y-l)*(i.y-l)),i.lineAngle=180*Math.atan2(l-i.y,r-i.x)/Math.PI,i.insideInterval=e.isAngleInsideInterval(o,this.visibility.start,this.visibility.range),a[t]=i}),e.frameHotspotValues[i]=a}},e.prototype.updateHotspotPositions=function(e){var t=document.getElementById("lineCanvas").getContext("2d");t.clearRect(0,0,this.lineCanvas.width,this.lineCanvas.height),t.lineWidth=.5,t.strokeStyle="rgba(0,0,0, 0.5)",t.beginPath();var i=5*e.mod(72)*Math.PI/180;180*i/Math.PI,this.currentFrame=e.mod(72);var n=this.labelHeight;console.log("Updating hotspot positions, currentFrame: "+e);var o=this;$.each(this.hotspots,function(){var i=$(this),a=unescape(i.attr("id")),s=o.frameHotspotValues[e][a];(void 0==o.hotspotWidths[a]||0==o.hotspotWidths[a])&&(o.hotspotWidths[a]=i.outerWidth()),i.css("transform","translate("+Math.floor(s.x-o.hotspotWidths[a]/2)+"px, "+(s.y-485-n)+"px)"),s.insideInterval?(i.css("display","block"),t.moveTo(s.x,s.y),t.lineTo(s.truckX,s.truckY)):i.css("display","none")}),t.stroke()},e.prototype.isAngleInsideInterval=function(e,t,i){return t=t.mod(360),intervalEnd=(t+i).mod(360),e=e.mod(360),intervalEnd>=t?e>=t&&intervalEnd>=e:e>=t||intervalEnd>=e},e.prototype.setRotation=function(e,t){var i="rotate("+t+"deg)";e.css("transform",i)},e.prototype.hideHotspots=function(){$(".hotspot-2d").remove()},funkis.ExteriorWalkaround=e}(),this.funkis=this.funkis||{},function(){function e(e,t){this.initialize(e,t)}e.prototype.knowledgeLibrary,e.prototype.stage,e.prototype.truck,e.prototype._hotspotObjects,e.prototype.origoX=0,e.prototype.origoY=0,e.prototype.truckCenterX=0,e.prototype.truckCenterY=0,e.prototype.mouseIsDown=!1,e.prototype.lastMouseX=0,e.prototype.lastTimelineFrame=0,e.prototype.cameraSpeed=.2,e.prototype.hotspotWidths={},e.prototype.hotspots,e.prototype.frameHotspotValues,e.prototype.initialize=function(e,t){$("#main").append($("<div id='exteriorWalkaround'></div>")),$("#main").addClass(e.truckType);var i=this;this.knowledgeLibrary=t,this.truckType=e.truckType+(e.isRhd?"_rhd":"_lhd"),console.log("ExteriorWalkaroundFullscreen initializing "+this.truckType),this.initTruckProperties(),this.initSequenceTruck(),this.initLineCanvas(),$.getJSON("content/media/interfaces/"+this.truckType+"/hotspots.json",function(e){i._hotspotObjects=e,i.initHotspots(),i.preCalculateHotspotPositions(),i.updateHotspotPositions(0)})},e.prototype.initTruckProperties=function(){this.canvasWidth=862,this.canvasHeight=765,this.isRigid()&&(this.canvasWidth=1800),$("<canvas id='exteriorWalkaroundFullscreenStage' width='"+this.canvasWidth+"' height='"+this.canvasHeight+"'></canvas>"),this.origoX=this.canvasWidth/2,this.origoY=this.canvasHeight/2,this.truckCenterX=this.origoX,this.truckCenterY=409,this.scaleX=this.canvasWidth/758,this.scaleY=this.canvasHeight/488},e.prototype.isRigid=function(){return-1!=this.truckType.indexOf("rigid")},e.prototype.initSequenceTruck=function(){for(var e=this,t=Array(72),i=71;i>=0;i--){var n=10>i?"0000"+i:"000"+i;t[i]="content/media/interfaces/"+this.truckType+"/fullscreen/fullscreen_"+this.truckType+"_"+n+".jpg"}var o=$("<div id='spritespin'></div>");o.spritespin({width:this.canvasWidth,height:this.canvasHeight,frames:t.length,source:t,animate:!1,loop:!1,enableCanvas:!0,reverse:!this.isRigid(),loopFrame:this.isRigid()?63:47,onFrame:function(){e.updateHotspotPositions(o.spritespin("frame"))},onLoad:function(){e.truckLoaded()}}),$("#exteriorWalkaround").append(o),o.mousedown(function(){console.log("Spritespin mousedown: Disabling hotspot mouse events"),$("#hotspots").css("pointer-events","none")}),o.mouseup(function(){console.log("Spritespin mouseup: Enabling hotspot mouse events"),$("#hotspots").css("pointer-events","auto")}),$("#exteriorWalkaround").hide()},e.prototype.truckLoaded=function(){$("#exteriorWalkaround").show(),window.loadComplete();var e=$("#spritespin");this.isRigid()?e.spritespin("frame",54):e.spritespin("frame",53),setTimeout(function(){e.spritespin("animate",!0,!1)},2e3)},e.prototype.initLineCanvas=function(){var e=$("<canvas id='lineCanvas' width='"+this.canvasWidth+"px' height='"+this.canvasHeight+"px'>Your browser doesn't support the awesome canvas element.</canvas>");$("#spritespin").append(e),this.lineCanvas=e[0]},e.prototype.highlightLine=function(e){console.log("Highlight line for hotspot: "+e);var t=document.getElementById("lineCanvas").getContext("2d");t.lineWidth=1,t.strokeStyle="#004393",t.beginPath();var i=this.frameHotspotValues[this.currentFrame][unescape(e)];t.moveTo(i.x,i.y),t.lineTo(i.truckX,i.truckY),t.stroke()},e.prototype.initHotspots=function(){var e=this._hotspotObjects;this.hotspots=[];var t=$("<div id='hotspots'></div>");$("#exteriorWalkaround").append(t);var i=this,n=$("<div class='hotspot-2d unselectable'></div>"),o=$("<div class='label unselectable'><p>Test</p></div>");n.append(o),$("body").append(n),this.labelHeight=o.outerHeight(),n.remove(),$.each(e,function(e){var n=$("<div id="+escape(e)+" class='hotspot-2d unselectable'></div>"),o=$("<div class='label unselectable'><p>"+$.FMGetSlideText(["slides",e,"title"])+"</p></div>");n.append(o),t.append(n),n.fastClick(function(){i.knowledgeLibrary.showSlide({slideId:unescape($(this).attr("id")),originX:n.offset().left,originY:n.offset().top})}),n.mouseover(function(){i.highlightLine($(this).attr("id"))}),n.mouseout(function(){i.updateHotspotPositions(i.currentFrame)}),i.hotspots.push(n)})},e.prototype.preCalculateHotspotPositions=function(){this.frameHotspotValues=Array(72);for(var e=this,t=this._hotspotObjects,i=this.frameHotspotValues.length-1;i>=0;i--){var n=5*i.mod(72)*Math.PI/180,o=180*n/Math.PI,a={};$.each(t,function(t){var i={x:-1,y:-1,truckX:-1,truckY:-1,opacity:1,lineLength:-1,lineAngle:-1,insideInterval:!1},s=0>this.label.yOffset?-1:1;i.x=Math.floor(e.truckCenterX+this.label.width*e.scaleX/2*Math.cos(n+this.label.angleOffset)),i.y=Math.floor(e.truckCenterY+this.label.yOffset+-1*this.label.height*e.scaleY/2*s*Math.sin(n+this.label.angleOffset)),s=0>this.truck.yOffset?-1:1;var r=e.truckCenterX+this.truck.width*e.scaleX/2*Math.cos(n+this.truck.angleOffset),l=e.truckCenterY+this.truck.yOffset+-1*this.truck.height*e.scaleY/2*s*Math.sin(n+this.truck.angleOffset);i.truckX=r,i.truckY=l,i.lineLength=Math.sqrt((i.x-r)*(i.x-r)+(i.y-l)*(i.y-l)),i.lineAngle=180*Math.atan2(l-i.y,r-i.x)/Math.PI,i.insideInterval=e.isAngleInsideInterval(o,this.visibility.start,this.visibility.range),a[t]=i}),e.frameHotspotValues[i]=a}},e.prototype.updateHotspotPositions=function(e){var t=document.getElementById("lineCanvas").getContext("2d");t.clearRect(0,0,this.lineCanvas.width,this.lineCanvas.height),t.lineWidth=.5,t.strokeStyle="rgba(0,0,0, 0.5)",t.beginPath(),this.currentFrame=e;var i=5*e.mod(72)*Math.PI/180;180*i/Math.PI,e=e.mod(72);var n=this.labelHeight;console.log("Updating hotspot positions, currentFrame: "+e);var o=this;$.each(this.hotspots,function(){var i=$(this),a=unescape(i.attr("id")),s=o.frameHotspotValues[e][a];(void 0==o.hotspotWidths[a]||0==o.hotspotWidths[a])&&(o.hotspotWidths[a]=i.outerWidth()),i.css("transform","translate("+Math.floor(s.x-o.hotspotWidths[a]/2)+"px, "+(s.y-765-n)+"px)"),s.insideInterval?(i.css("display","block"),t.moveTo(s.x,s.y),t.lineTo(s.truckX,s.truckY)):i.css("display","none")}),t.stroke()},e.prototype.isAngleInsideInterval=function(e,t,i){return t=t.mod(360),intervalEnd=(t+i).mod(360),e=e.mod(360),intervalEnd>=t?e>=t&&intervalEnd>=e:e>=t||intervalEnd>=e},e.prototype.setRotation=function(e,t){var i="rotate("+t+"deg)";e.css("transform",i)},e.prototype.hideHotspots=function(){$(".hotspot-2d").remove()},funkis.ExteriorWalkaroundFullscreen=e}(),window.log=function(){if(log.history=log.history||[],log.history.push(arguments),this.console){arguments.callee=arguments.callee.caller;var e=[].slice.call(arguments);"object"==typeof console.log?log.apply.call(console.log,console,e):console.log.apply(console,e)}},function(e){function t(){}for(var i,n="assert,count,debug,dir,dirxml,error,exception,group,groupCollapsed,groupEnd,info,log,timeStamp,profile,profileEnd,time,timeEnd,trace,warn".split(",");i=n.pop();)e[i]=e[i]||t}(function(){try{return console.log(),window.console}catch(e){return window.console={}}}()),function(e){e.fn.fastClick=function(t){return e(this).each(function(){e.FastButton(e(this)[0],t)
})},e.FastButton=function(t,i){var n,o,a=function(){e(t).unbind("touchend"),e("body").unbind("touchmove.fastClick")},s=function(t){t.stopPropagation(),a(),i.call(this,t),"touchend"===t.type&&e.clickbuster.preventGhostClick(n,o)},r=function(e){(Math.abs(e.originalEvent.touches[0].clientX-n)>10||Math.abs(e.originalEvent.touches[0].clientY-o)>10)&&a()},l=function(i){i.stopPropagation(),e(t).bind("touchend",s),e("body").bind("touchmove.fastClick",r),n=i.originalEvent.touches[0].clientX,o=i.originalEvent.touches[0].clientY};e(t).bind({touchstart:l,click:s})},e.clickbuster={coordinates:[],preventGhostClick:function(t,i){e.clickbuster.coordinates.push(t,i),window.setTimeout(e.clickbuster.pop,2500)},pop:function(){e.clickbuster.coordinates.splice(0,2)},onClick:function(t){var i,n,o;for(o=0;e.clickbuster.coordinates.length>o;o+=2)i=e.clickbuster.coordinates[o],n=e.clickbuster.coordinates[o+1],25>Math.abs(t.clientX-i)&&25>Math.abs(t.clientY-n)&&(t.stopPropagation(),t.preventDefault())}},e(function(){document.addEventListener?document.addEventListener("click",e.clickbuster.onClick,!0):document.attachEvent&&document.attachEvent("onclick",e.clickbuster.onClick)})}(jQuery);var options,knowledgeLibrary,urlVars,popup;$(function(){console.log("$(window).load fired!"),init()}),Number.prototype.mod=function(e){return(this%e+e)%e},[0,0].indexOf||(Array.prototype.indexOf=function(e,t,i){for(var t=0|t,i=this.length;i>t&&!(t in this||this[t]!==e);t++);return t^i?-1:t});var BrowserDetect={init:function(){this.browser=this.searchString(this.dataBrowser)||"An unknown browser",this.version=this.searchVersion(navigator.userAgent)||this.searchVersion(navigator.appVersion)||"an unknown version",this.OS=this.searchString(this.dataOS)||"an unknown OS"},searchString:function(e){for(var t=0;e.length>t;t++){var i=e[t].string,n=e[t].prop;if(this.versionSearchString=e[t].versionSearch||e[t].identity,i){if(-1!=i.indexOf(e[t].subString))return e[t].identity}else if(n)return e[t].identity}},searchVersion:function(e){var t=e.indexOf(this.versionSearchString);if(-1!=t)return parseFloat(e.substring(t+this.versionSearchString.length+1))},dataBrowser:[{string:navigator.userAgent,subString:"Chrome",identity:"Chrome"},{string:navigator.userAgent,subString:"OmniWeb",versionSearch:"OmniWeb/",identity:"OmniWeb"},{string:navigator.vendor,subString:"Apple",identity:"Safari",versionSearch:"Version"},{prop:window.opera,identity:"Opera",versionSearch:"Version"},{string:navigator.vendor,subString:"iCab",identity:"iCab"},{string:navigator.vendor,subString:"KDE",identity:"Konqueror"},{string:navigator.userAgent,subString:"Firefox",identity:"Firefox"},{string:navigator.vendor,subString:"Camino",identity:"Camino"},{string:navigator.userAgent,subString:"Netscape",identity:"Netscape"},{string:navigator.userAgent,subString:"MSIE",identity:"Explorer",versionSearch:"MSIE"},{string:navigator.userAgent,subString:"Gecko",identity:"Mozilla",versionSearch:"rv"},{string:navigator.userAgent,subString:"Mozilla",identity:"Netscape",versionSearch:"Mozilla"}],dataOS:[{string:navigator.platform,subString:"Win",identity:"Windows"},{string:navigator.platform,subString:"Mac",identity:"Mac"},{string:navigator.userAgent,subString:"iPhone",identity:"iPhone/iPod"},{string:navigator.platform,subString:"Linux",identity:"Linux"}]};BrowserDetect.init();